(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{418:function(e,t,r){var map={"./af":280,"./af.js":280,"./ar":281,"./ar-dz":282,"./ar-dz.js":282,"./ar-kw":283,"./ar-kw.js":283,"./ar-ly":284,"./ar-ly.js":284,"./ar-ma":285,"./ar-ma.js":285,"./ar-sa":286,"./ar-sa.js":286,"./ar-tn":287,"./ar-tn.js":287,"./ar.js":281,"./az":288,"./az.js":288,"./be":289,"./be.js":289,"./bg":290,"./bg.js":290,"./bm":291,"./bm.js":291,"./bn":292,"./bn-bd":293,"./bn-bd.js":293,"./bn.js":292,"./bo":294,"./bo.js":294,"./br":295,"./br.js":295,"./bs":296,"./bs.js":296,"./ca":297,"./ca.js":297,"./cs":298,"./cs.js":298,"./cv":299,"./cv.js":299,"./cy":300,"./cy.js":300,"./da":301,"./da.js":301,"./de":302,"./de-at":303,"./de-at.js":303,"./de-ch":304,"./de-ch.js":304,"./de.js":302,"./dv":305,"./dv.js":305,"./el":306,"./el.js":306,"./en-au":307,"./en-au.js":307,"./en-ca":308,"./en-ca.js":308,"./en-gb":309,"./en-gb.js":309,"./en-ie":310,"./en-ie.js":310,"./en-il":311,"./en-il.js":311,"./en-in":312,"./en-in.js":312,"./en-nz":313,"./en-nz.js":313,"./en-sg":314,"./en-sg.js":314,"./eo":315,"./eo.js":315,"./es":316,"./es-do":317,"./es-do.js":317,"./es-mx":318,"./es-mx.js":318,"./es-us":319,"./es-us.js":319,"./es.js":316,"./et":320,"./et.js":320,"./eu":321,"./eu.js":321,"./fa":322,"./fa.js":322,"./fi":323,"./fi.js":323,"./fil":324,"./fil.js":324,"./fo":325,"./fo.js":325,"./fr":326,"./fr-ca":327,"./fr-ca.js":327,"./fr-ch":328,"./fr-ch.js":328,"./fr.js":326,"./fy":329,"./fy.js":329,"./ga":330,"./ga.js":330,"./gd":331,"./gd.js":331,"./gl":332,"./gl.js":332,"./gom-deva":333,"./gom-deva.js":333,"./gom-latn":334,"./gom-latn.js":334,"./gu":335,"./gu.js":335,"./he":336,"./he.js":336,"./hi":337,"./hi.js":337,"./hr":338,"./hr.js":338,"./hu":339,"./hu.js":339,"./hy-am":340,"./hy-am.js":340,"./id":341,"./id.js":341,"./is":342,"./is.js":342,"./it":343,"./it-ch":344,"./it-ch.js":344,"./it.js":343,"./ja":345,"./ja.js":345,"./jv":346,"./jv.js":346,"./ka":347,"./ka.js":347,"./kk":348,"./kk.js":348,"./km":349,"./km.js":349,"./kn":350,"./kn.js":350,"./ko":351,"./ko.js":351,"./ku":352,"./ku.js":352,"./ky":353,"./ky.js":353,"./lb":354,"./lb.js":354,"./lo":355,"./lo.js":355,"./lt":356,"./lt.js":356,"./lv":357,"./lv.js":357,"./me":358,"./me.js":358,"./mi":359,"./mi.js":359,"./mk":360,"./mk.js":360,"./ml":361,"./ml.js":361,"./mn":362,"./mn.js":362,"./mr":363,"./mr.js":363,"./ms":364,"./ms-my":365,"./ms-my.js":365,"./ms.js":364,"./mt":366,"./mt.js":366,"./my":367,"./my.js":367,"./nb":368,"./nb.js":368,"./ne":369,"./ne.js":369,"./nl":370,"./nl-be":371,"./nl-be.js":371,"./nl.js":370,"./nn":372,"./nn.js":372,"./oc-lnc":373,"./oc-lnc.js":373,"./pa-in":374,"./pa-in.js":374,"./pl":375,"./pl.js":375,"./pt":376,"./pt-br":377,"./pt-br.js":377,"./pt.js":376,"./ro":378,"./ro.js":378,"./ru":379,"./ru.js":379,"./sd":380,"./sd.js":380,"./se":381,"./se.js":381,"./si":382,"./si.js":382,"./sk":383,"./sk.js":383,"./sl":384,"./sl.js":384,"./sq":385,"./sq.js":385,"./sr":386,"./sr-cyrl":387,"./sr-cyrl.js":387,"./sr.js":386,"./ss":388,"./ss.js":388,"./sv":389,"./sv.js":389,"./sw":390,"./sw.js":390,"./ta":391,"./ta.js":391,"./te":392,"./te.js":392,"./tet":393,"./tet.js":393,"./tg":394,"./tg.js":394,"./th":395,"./th.js":395,"./tk":396,"./tk.js":396,"./tl-ph":397,"./tl-ph.js":397,"./tlh":398,"./tlh.js":398,"./tr":399,"./tr.js":399,"./tzl":400,"./tzl.js":400,"./tzm":401,"./tzm-latn":402,"./tzm-latn.js":402,"./tzm.js":401,"./ug-cn":403,"./ug-cn.js":403,"./uk":404,"./uk.js":404,"./ur":405,"./ur.js":405,"./uz":406,"./uz-latn":407,"./uz-latn.js":407,"./uz.js":406,"./vi":408,"./vi.js":408,"./x-pseudo":409,"./x-pseudo.js":409,"./yo":410,"./yo.js":410,"./zh-cn":411,"./zh-cn.js":411,"./zh-hk":412,"./zh-hk.js":412,"./zh-mo":413,"./zh-mo.js":413,"./zh-tw":414,"./zh-tw.js":414};function l(e){var t=n(e);return r(t)}function n(e){if(!r.o(map,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return map[e]}l.keys=function(){return Object.keys(map)},l.resolve=n,e.exports=l,l.id=418},461:function(e,t,r){"use strict";r.r(t);r(26),r(19),r(21),r(38),r(39);var l,n,o=r(11),d=(r(415),r(28),r(9),r(64),r(20),r(66),r(420),r(47),r(56),r(32)),c=r(65),f=r.n(c),h=r(132),m=r.n(h);r(279);function v(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,r)}return t}var j=new Array,y={name:"edit-media",layout:"edit",middleware:"auth",components:{draggable:m.a},computed:function(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?v(Object(source),!0).forEach((function(t){Object(o.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):v(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}({},Object(d.b)(["isAuthenticated","loggedInUser"])),created:function(){},mounted:function(){this.getFiles(),l=r(442),n=(new l.Player).toDestination()},data:function(){var e;return e={url_server:this.$store.state.url_server,accept_file:".mp3",value_file:"",uploadPercentageFile:0,previewFile:"",flexIsFile:"",source:this.media_source,id_parent:this.file_id_parent,id_file:0,titre:"",file_media:""},Object(o.a)(e,"value_file",""),Object(o.a)(e,"isNew_file",!1),Object(o.a)(e,"files",[]),Object(o.a)(e,"file",""),Object(o.a)(e,"isShowLoadingFiles",!0),Object(o.a)(e,"isShowNoResultFiles",!1),Object(o.a)(e,"progressValTotal",0),Object(o.a)(e,"isPlayingSound",-1),Object(o.a)(e,"valSetInterval",""),Object(o.a)(e,"valSetTimeout",""),Object(o.a)(e,"myCurrentTime",0),Object(o.a)(e,"myCurrentTimeSave",0),e},props:{file_id_parent:Number},methods:{getFiles:function(){var e=this;f.a.get(this.url_server+"/getFiles?id_playlist="+this.id_parent).then((function(t){e.isShowLoadingFiles=!1,e.files=t.data.liste,0==e.files.length&&(e.isShowNoResultFiles=!0)})).catch((function(e){displayErreur("files loading error")}))},getFile:function(){var e=this;f.a.get(this.url_server+"/getFile?id_file="+this.id_file).then((function(t){e.file=t.data.liste,void 0!==e.file.fichier&&(e.value_file=e.file.fichier,e.getPreviewFile())})).catch((function(t){e.id_file=0,displayErreur("file loading error")}))},delFile:function(){var e=this;f.a.get(this.url_server+"/delFile?id_file="+this.id_file).then((function(t){e.displayFile(),e.getFiles()})).catch((function(t){e.id_file=0,displayErreur("file deleting error")}))},submitFileForm:function(){var e=this;clearRequiredModal(),this.hideErreur(),this.isNew_file=!1,0==this.id_file&&(this.isNew_file=!0);var data={id_file:this.id_file,id_playlist:this.id_parent,titre:this.titre,fichier:this.value_file,isNew:this.isNew_file},t=document.querySelectorAll(".modalZone .required_field");[].forEach.call(t,(function(e){""==e.value&&e.classList.add("required")})),""==this.value_file&&document.querySelectorAll(".modalZone .uploadZone-file")[0].classList.add("required"),checkRequiredModal()?displayErreur("The fields indicated are required"):(disabledActionsModal(),f.a.post(this.url_server+"/addFile",data).then((function(t){e.id_file=t.data.id_file,e.displayFile(),e.isShowNoResultFiles=!1,e.getFiles()})).catch((function(e){enabledActionsModal(),displayErreur("Error adding file : "+e)})))},handleFileUploadMedia:function(e){this.hideErreur();var element=e.currentTarget;this.fileId=element.id,this.file_media=element.files[0],this.titre=element.files[0].name,""!=this.file_media&&this.submitMedia()},submitMedia:function(){var e=this;this.uploadPercentageFile=0;var t=new FormData;t.append("file",this.file_media),document.querySelectorAll(".progress-media")[0].classList.remove("hidden"),document.querySelectorAll(".uploadZone-file")[0].classList.add("hidden"),document.getElementById("file_media").disabled=!0,f.a.post(this.url_server+"/uploadFile",t,{headers:{"Content-Type":"multipart/form-data"},onUploadProgress:function(e){var t=parseInt(Math.round(100*e.loaded/e.total));document.querySelectorAll(".progress-title-media")[0].innerHTML=t+"%",this.uploadPercentageFile=t}.bind(this)}).then((function(t){t.data.isOptimize;document.querySelector("#file_media").value="",e.value_file=t.data.optimizeFile[0],e.submitFileForm()})).catch((function(e){e.response.data.message,displayErreur(e.response.data.message),document.querySelectorAll(".progress-media")[0].classList.add("hidden"),document.querySelectorAll(".uploadZone-file")[0].classList.remove("hidden"),document.getElementById("file_media").disabled=!1}))},getModeFile:function(e,t){return""},getPreviewFile:function(){document.querySelectorAll(".progress-title-media")[0].innerHTML="",document.querySelectorAll(".progress-media")[0].classList.add("hidden"),document.querySelectorAll(".uploadZone-file")[0].classList.remove("hidden"),document.getElementById("file_media").disabled=!1;var e=this.value_file;""!=this.value_file&&(this.previewFile=this.getModeFile(e,!0))},displayFile:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=document.querySelectorAll("#defaultModalFile")[0];t.classList.contains("hidden")?(t.classList.remove("hidden"),t.focus(),this.id_file=e,0!=this.id_file?this.getFile():(this.value_file="",this.previewFile="")):(this.value_file="",t.classList.add("hidden"),this.initForm())},hideErreur:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){hideErreur()})),initForm:function(e){clearRequiredModal(),enabledActionsModal(),hideErreur()},onEndPosition:function(){var data={id_parent:this.id_parent,list:this.files};f.a.post(this.url_server+"/updateFilePosition",data).then((function(e){})).catch((function(e){return displayErreur("error updating positions")}))},loadSound:function(e,t,r){var n=this;j[r]=new l.ToneAudioBuffer(e,(function(){document.querySelector("#"+t+" .duration").innerHTML=n.convertSoundDuration(j[r].duration),document.querySelector("#"+t+" .player").classList.remove("isLoading")}))},playSound:function(e,t,r){document.querySelector("#"+t+" .player").classList.contains("isLoading")||(this.isPlayingSound==r?"stopped"==n.state?(n.start(),n.seek(this.myCurrentTimeSave)):this.pauseSound(t):(-1!=this.isPlayingSound&&(clearTimeout(this.valSetTimeout),this.stopSound()),this.initAllSound(),l.Transport.start(),this.myCurrentTime=new l.TransportTime,this.isPlayingSound=r,this.progressValTotal=j[r].duration,n.buffer=j[r],n.start(),this.playSoundProgress(t),document.querySelector("#"+t+" .player img").setAttribute("src","/img/pause.png")))},initAllSound:function(){document.querySelectorAll(".progress-play-val").forEach((function(e){return e.style.width="0px"})),document.querySelectorAll(".player img").forEach((function(e){return e.setAttribute("src","/img/play.svg")}))},pauseSound:function(e){clearInterval(this.valSetInterval),n.stop(),this.myCurrentTimeSave=this.myCurrentTime.toSeconds(),console.log("PAUSE : "+this.myCurrentTimeSave),document.querySelector("#"+e+" .player img").setAttribute("src","/img/play.svg")},stopSound:function(){this.isPlayingSound=-1,this.progressValTotal=0,clearInterval(this.valSetInterval),document.querySelectorAll(".progress-play-val").forEach((function(e){return e.style.width="0px"})),n.stop(),l.Transport.stop(),this.myCurrentTime=0},playSoundProgress:function(e){-1!=this.isPlayingSound?(document.querySelector("#"+e+" .progress-play-val").style.width=Math.round(100*this.myCurrentTime.toSeconds()/this.progressValTotal)+"%",this.valSetInterval=setTimeout(function(){-1!=this.isPlayingSound&&this.playSoundProgress(e)}.bind(this),200)):(console.log("OUT"),clearTimeout(this.valSetInterval))},playSoundOld:function(e,t,r){console.log(j[r]),n=new l.Player(e,(function(){n.start()})).toDestination()},convertSoundDuration:function(e){return(e/60).toFixed(2).toString().replace(".",":")}}},_=y,w=r(10),component=Object(w.a)(_,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("div",{staticClass:"form-bloc form-bloc-list mt-9"},[r("div",{staticClass:"col w-full"},[r("div",{staticClass:"col-content"},[r("label",{staticClass:"mb-3 border-b border-mainColor cursor-pointer",attrs:{for:"AddFile",id:"LAddFile"},on:{click:function(t){e.displayFile(0),e.hideErreur()}}},[r("div",{staticClass:"pb-2"},[e._v("Fichiers son")]),e._v(" "),r("div",{staticClass:"flex-1 text-right flex justify-end add highlight"},[r("svg",{staticClass:"bi",attrs:{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"}},[r("path",{attrs:{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"}})])])]),e._v(" "),r("div",{directives:[{name:"show",rawName:"v-show",value:e.isShowLoadingFiles,expression:"isShowLoadingFiles"}]},[e._v("Chargement des fichiers...")]),r("div",{directives:[{name:"show",rawName:"v-show",value:e.isShowNoResultFiles,expression:"isShowNoResultFiles"}]},[e._v("Aucun fichier")]),e._v(" "),r("draggable",{staticClass:"sound-grid w-full",attrs:{list:e.files,tag:"div",draggable:".item"},on:{end:e.onEndPosition}},e._l(e.files,(function(t,l){return r("div",{staticClass:"relative item cursor-pointer"},[r("div",{staticClass:"soundPlayer",attrs:{id:"S_"+l}},[r("div",{staticClass:"progress-play"},[r("div",{staticClass:"progress-play-val"})]),e._v(" "),r("div",{staticClass:"content-play"},[r("div",{staticClass:"player isLoading",on:{click:function(r){return e.playSound("/upload/"+t.fichier,"S_"+l,l)}}},[r("img",{attrs:{src:"/img/play.svg",alt:"Play"}})]),e._v(" "),r("div",{on:{click:function(r){e.displayFile(t.id_file),e.hideErreur()}}},[e._v(e._s(t.titre))]),e._v(" "),r("div",{staticClass:"duration"},[e._v("..."+e._s(e.loadSound("/upload/"+t.fichier,"S_"+l,l)))])])])])})),0)],1)])]),e._v(" "),r("div",{staticClass:"modalZone hidden overflow-y-auto overflow-x-hidden bg-mainBg/50 flex fixed right-0 left-0 top-4 z-50 justify-center items-center md:h-full md:inset-0",attrs:{id:"defaultModalFile",tabindex:"1"},on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"esc",27,t.key,["Esc","Escape"])?null:e.displayFile(0)}}},[r("div",{staticClass:"relative px-6 w-full max-w-2xl h-full md:h-auto"},[r("div",{staticClass:"relative bg-mainBg p-6 border border-activeColor"},[r("div",{staticClass:"flex justify-between items-start border-b border-mainColor"},[r("h1",[e._v("Fichier")]),e._v(" "),r("div",{staticClass:"bg-transparent ml-auto inline-flex items-center highlight",attrs:{"data-modal-toggle":"defaultModalFile"}},[r("svg",{staticClass:"big cursor-pointer",attrs:{fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},on:{click:function(t){return e.displayFile()}}},[r("path",{attrs:{"fill-rule":"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z","clip-rule":"evenodd"}})])])]),e._v(" "),r("div",[r("div",{staticClass:"form-container w-full border-0 p-0"},[r("form",{attrs:{method:"post",autocomplete:"off"},on:{submit:function(t){return t.preventDefault(),e.submitFileForm.apply(null,arguments)}}},[r("div",{staticClass:"form-bloc mt-9"},[r("div",{staticClass:"col w-full"},[r("div",{staticClass:"col-content"},[r("div",[r("div",{staticClass:"justify-between align-center",class:e.flexIsFile},[r("div",{staticClass:"previewFileUpload pb-1 flex items-center  justify-center"},[r("div",{staticClass:"text-sm",domProps:{innerHTML:e._s(e.previewFile)}})])]),e._v(" "),r("label",{staticClass:"uploadZone-file bt-upload required_field",on:{click:e.initForm}},[r("span",{staticClass:"leading-normal"},[e._v("choisir un mp3")]),e._v(" "),r("input",{ref:"file_media",staticClass:"hidden",attrs:{type:"file",id:"file_media",accept:e.accept_file},on:{change:function(t){return e.handleFileUploadMedia(t)}}})]),e._v(" "),r("div",{staticClass:"progress progress-media hidden"},[r("div",{staticClass:"progress-title-media"},[e._v(e._s(e.uploadPercentageFile)+"%")]),e._v(" "),r("div",{staticClass:"progress-bar-media",style:{width:e.uploadPercentageFile+"%"}})])])])])]),e._v(" "),r("div",{staticClass:"form-action"},[r("div",[r("button",{attrs:{type:"button"},on:{click:function(t){return e.displayFile()}}},[e._v("Annuler")])]),e._v(" "),r("div",{directives:[{name:"show",rawName:"v-show",value:0!=e.id_file,expression:"id_file != 0"}]},[r("button",{staticClass:"bt-delete",attrs:{type:"button"},on:{click:function(t){return e.delFile()}}},[e._v("Supprimer")])])])])])])])])])])}),[],!1,null,null,null);t.default=component.exports}}]);