(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{446:function(t,e,r){"use strict";r.r(e);r(26),r(19),r(21),r(38),r(39);var n=r(11),o=(r(20),r(32)),l=r(65),c=r.n(l),d=r(132),v=r.n(d);function h(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,r)}return e}var w={layout:"edit",middleware:"auth",computed:function(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?h(Object(source),!0).forEach((function(e){Object(n.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):h(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}({},Object(o.b)(["isAuthenticated","loggedInfont"])),components:{draggable:v.a},created:function(){},data:function(){return{url_server:this.$store.state.url_server,url_back:"",table:"interview",isShowLoading:!0,isShowNoResult:!1,id_user:this.$auth.user.id,interviews:[],recherche:"",triMode:"ASC",triBy:"titre",url_add:"/edit/interviews/form?id_interview=0"}},mounted:function(){var t=this;this.getInterviews(),document.querySelectorAll("button").forEach((function(e){e.addEventListener("click",t.deleteCancelFromList)}))},methods:{getInterviews:function(){var t=this;c.a.get(this.url_server+"/getInterviews?recherche="+this.recherche+"&triBy="+this.triBy+"&triMode="+this.triMode).then((function(e){t.isShowLoading=!1,t.interviews=e.data.liste,0==t.interviews.length&&(t.isShowNoResult=!0)})).catch((function(t){return displayErreur("error loading interviews")}))},getInterview:function(t){this.$router.push("/edit/interviews/form?id_interview="+t)},deleteFromList:function(t,e){var r=t.target.closest("td");r.querySelector(".iconDelete").classList.add("hidden"),r.querySelector(".deleteFromList").classList.remove("hidden")},deleteCancelFromList:function(t){var e=t.target.closest("td");e.querySelector(".deleteFromList").classList.add("hidden"),e.querySelector(".iconDelete").classList.remove("hidden")},deleteConfirmFromList:function(t,e){var r=this;this.deleteCancelFromList(t),c.a.get(this.url_server+"/delInterview?id_interview="+e).then((function(t){r.getInterviews()})).catch((function(t){return displayErreur("error deleting interview")}))},onlineFromList:function(t,e){var r=t.target.closest("td");c.a.get(this.url_server+"/online?table=interview&libelle=id_interview&id="+e).then((function(t){""!=t.data.status&&(r.innerHTML=t.data.status)})).catch((function(t){return displayErreur("error changing interview state")}))},searchFromList:function(t){this.getInterviews()},sortFromList:function(t){"ASC"==this.triMode?this.triMode="DESC":this.triMode="ASC",this.triBy=t,this.getInterviews()},onEndPosition:function(){var data={list:this.interviews};c.a.post(this.url_server+"/updateInterviewPosition",data).then((function(t){})).catch((function(t){return displayErreur("error changing interview position")}))}}},f=w,m=r(10),component=Object(m.a)(f,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"container no-scrollbar edit-form-nav"},[r("div",{staticClass:"list-container edit-container w-full"},[r("div",{staticClass:"edit-container-header"},[r("h1",[t._v("Interviews")]),r("div",{staticClass:"add highlight"},[r("NuxtLink",{attrs:{to:{path:t.url_add}}},[r("svg",{staticClass:"big",attrs:{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"}},[r("path",{attrs:{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"}})])])],1)]),t._v(" "),r("div",{staticClass:"tools"},[r("div",[r("input",{directives:[{name:"model",rawName:"v-model",value:t.recherche,expression:"recherche"}],attrs:{placeholder:"search",type:"text",name:"recherche",id:"recherche",value:""},domProps:{value:t.recherche},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.searchFromList.apply(null,arguments)},input:function(e){e.target.composing||(t.recherche=e.target.value)}}})]),t._v(" "),r("div",[t._v(t._s(t.interviews.length)+" result"),t.interviews.length>1?r("span",[t._v("s")]):t._e()])]),t._v(" "),r("table",{staticClass:"w-full"},[r("thead",[r("tr",{staticClass:"hide"},[r("th",{staticClass:"w-28 text-left cursor-pointer isLink"},[t._v(" ")]),t._v(" "),r("th",{staticClass:"text-left cursor-pointer isLink",on:{click:function(e){return t.sortFromList("titre")}}},[t._v("Title")]),t._v(" "),r("th",{staticClass:"w-6 text-left isLink",on:{click:function(e){return t.sortFromList("online")}}},[t._v(" ")]),t._v(" "),r("th",{staticClass:"w-6 text-left"},[t._v(" ")])]),t._v(" "),t.interviews.length?t._e():r("tr",[r("td",{staticClass:"flex",attrs:{colspan:"4"}},[r("div",{directives:[{name:"show",rawName:"v-show",value:t.isShowLoading,expression:"isShowLoading"}]},[t._v("Chargement des interviews...")]),r("div",{directives:[{name:"show",rawName:"v-show",value:t.isShowNoResult,expression:"isShowNoResult"}],staticClass:"flex"},[r("div",{staticClass:"pr-1 flex items-center"},[r("NuxtLink",{attrs:{to:{path:t.url_add}}},[t._v("aucun résultat, ajouter un interview ")])],1),t._v(" "),r("div",{staticClass:"add highlight"},[r("NuxtLink",{attrs:{to:{path:t.url_add}}},[r("svg",{staticClass:"big",attrs:{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"}},[r("path",{attrs:{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"}})])])],1)])])])]),t._v(" "),r("draggable",{attrs:{list:t.interviews,tag:"tbody"},on:{end:t.onEndPosition}},t._l(t.interviews,(function(e,n){return r("tr",{staticClass:"border-b border-mainColor isLink"},[r("td",{on:{click:function(r){return t.getInterview(e.id_interview)}}},[""!=e.visuel?r("img",{attrs:{src:"/upload/"+e.visuel.replace("file-","file-s-"),alt:e.titre}}):t._e()]),t._v(" "),r("td",{on:{click:function(r){return t.getInterview(e.id_interview)}}},[t._v(t._s(e.titre))]),t._v(" "),r("td",{staticClass:"actionList",on:{click:function(r){return t.onlineFromList(r,e.id_interview)}}},[1==e.online?r("span",[t._v("online")]):r("span",[t._v("draft")])]),t._v(" "),r("td",{staticClass:"actionList"},[r("div",{staticClass:"iconDelete"},[r("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},on:{click:function(r){return t.deleteFromList(r,e.id_interview)}}},[r("path",{attrs:{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"}})])]),t._v(" "),r("div",{staticClass:"deleteFromList hidden l flex justify-end  items-center"},[r("div",{staticClass:"mr-1"},[r("button",{staticClass:"half",attrs:{type:"button"},on:{click:function(e){return t.deleteCancelFromList(e)}}},[t._v("Cancel")])]),r("div",[r("button",{staticClass:"half",attrs:{type:"button"},on:{click:function(r){return t.deleteConfirmFromList(r,e.id_interview)}}},[t._v("Confirm")])])])])])})),0)],1)])])}),[],!1,null,null,null);e.default=component.exports}}]);