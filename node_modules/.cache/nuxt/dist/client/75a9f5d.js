(window.webpackJsonp=window.webpackJsonp||[]).push([[25],{418:function(t,e,n){var map={"./af":280,"./af.js":280,"./ar":281,"./ar-dz":282,"./ar-dz.js":282,"./ar-kw":283,"./ar-kw.js":283,"./ar-ly":284,"./ar-ly.js":284,"./ar-ma":285,"./ar-ma.js":285,"./ar-sa":286,"./ar-sa.js":286,"./ar-tn":287,"./ar-tn.js":287,"./ar.js":281,"./az":288,"./az.js":288,"./be":289,"./be.js":289,"./bg":290,"./bg.js":290,"./bm":291,"./bm.js":291,"./bn":292,"./bn-bd":293,"./bn-bd.js":293,"./bn.js":292,"./bo":294,"./bo.js":294,"./br":295,"./br.js":295,"./bs":296,"./bs.js":296,"./ca":297,"./ca.js":297,"./cs":298,"./cs.js":298,"./cv":299,"./cv.js":299,"./cy":300,"./cy.js":300,"./da":301,"./da.js":301,"./de":302,"./de-at":303,"./de-at.js":303,"./de-ch":304,"./de-ch.js":304,"./de.js":302,"./dv":305,"./dv.js":305,"./el":306,"./el.js":306,"./en-au":307,"./en-au.js":307,"./en-ca":308,"./en-ca.js":308,"./en-gb":309,"./en-gb.js":309,"./en-ie":310,"./en-ie.js":310,"./en-il":311,"./en-il.js":311,"./en-in":312,"./en-in.js":312,"./en-nz":313,"./en-nz.js":313,"./en-sg":314,"./en-sg.js":314,"./eo":315,"./eo.js":315,"./es":316,"./es-do":317,"./es-do.js":317,"./es-mx":318,"./es-mx.js":318,"./es-us":319,"./es-us.js":319,"./es.js":316,"./et":320,"./et.js":320,"./eu":321,"./eu.js":321,"./fa":322,"./fa.js":322,"./fi":323,"./fi.js":323,"./fil":324,"./fil.js":324,"./fo":325,"./fo.js":325,"./fr":326,"./fr-ca":327,"./fr-ca.js":327,"./fr-ch":328,"./fr-ch.js":328,"./fr.js":326,"./fy":329,"./fy.js":329,"./ga":330,"./ga.js":330,"./gd":331,"./gd.js":331,"./gl":332,"./gl.js":332,"./gom-deva":333,"./gom-deva.js":333,"./gom-latn":334,"./gom-latn.js":334,"./gu":335,"./gu.js":335,"./he":336,"./he.js":336,"./hi":337,"./hi.js":337,"./hr":338,"./hr.js":338,"./hu":339,"./hu.js":339,"./hy-am":340,"./hy-am.js":340,"./id":341,"./id.js":341,"./is":342,"./is.js":342,"./it":343,"./it-ch":344,"./it-ch.js":344,"./it.js":343,"./ja":345,"./ja.js":345,"./jv":346,"./jv.js":346,"./ka":347,"./ka.js":347,"./kk":348,"./kk.js":348,"./km":349,"./km.js":349,"./kn":350,"./kn.js":350,"./ko":351,"./ko.js":351,"./ku":352,"./ku.js":352,"./ky":353,"./ky.js":353,"./lb":354,"./lb.js":354,"./lo":355,"./lo.js":355,"./lt":356,"./lt.js":356,"./lv":357,"./lv.js":357,"./me":358,"./me.js":358,"./mi":359,"./mi.js":359,"./mk":360,"./mk.js":360,"./ml":361,"./ml.js":361,"./mn":362,"./mn.js":362,"./mr":363,"./mr.js":363,"./ms":364,"./ms-my":365,"./ms-my.js":365,"./ms.js":364,"./mt":366,"./mt.js":366,"./my":367,"./my.js":367,"./nb":368,"./nb.js":368,"./ne":369,"./ne.js":369,"./nl":370,"./nl-be":371,"./nl-be.js":371,"./nl.js":370,"./nn":372,"./nn.js":372,"./oc-lnc":373,"./oc-lnc.js":373,"./pa-in":374,"./pa-in.js":374,"./pl":375,"./pl.js":375,"./pt":376,"./pt-br":377,"./pt-br.js":377,"./pt.js":376,"./ro":378,"./ro.js":378,"./ru":379,"./ru.js":379,"./sd":380,"./sd.js":380,"./se":381,"./se.js":381,"./si":382,"./si.js":382,"./sk":383,"./sk.js":383,"./sl":384,"./sl.js":384,"./sq":385,"./sq.js":385,"./sr":386,"./sr-cyrl":387,"./sr-cyrl.js":387,"./sr.js":386,"./ss":388,"./ss.js":388,"./sv":389,"./sv.js":389,"./sw":390,"./sw.js":390,"./ta":391,"./ta.js":391,"./te":392,"./te.js":392,"./tet":393,"./tet.js":393,"./tg":394,"./tg.js":394,"./th":395,"./th.js":395,"./tk":396,"./tk.js":396,"./tl-ph":397,"./tl-ph.js":397,"./tlh":398,"./tlh.js":398,"./tr":399,"./tr.js":399,"./tzl":400,"./tzl.js":400,"./tzm":401,"./tzm-latn":402,"./tzm-latn.js":402,"./tzm.js":401,"./ug-cn":403,"./ug-cn.js":403,"./uk":404,"./uk.js":404,"./ur":405,"./ur.js":405,"./uz":406,"./uz-latn":407,"./uz-latn.js":407,"./uz.js":406,"./vi":408,"./vi.js":408,"./x-pseudo":409,"./x-pseudo.js":409,"./yo":410,"./yo.js":410,"./zh-cn":411,"./zh-cn.js":411,"./zh-hk":412,"./zh-hk.js":412,"./zh-mo":413,"./zh-mo.js":413,"./zh-tw":414,"./zh-tw.js":414};function r(t){var e=o(t);return n(e)}function o(t){if(!n.o(map,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return map[t]}r.keys=function(){return Object.keys(map)},r.resolve=o,t.exports=r,r.id=418},456:function(t,e,n){"use strict";n.r(e);n(26),n(19),n(21),n(38),n(20),n(39);var r=n(11),o=(n(66),n(9),n(64),n(32)),l=n(65),d=n.n(l),c=n(279),m=n.n(c);function v(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}var j={layout:"edit",middleware:"auth",components:{},created:function(){void 0===this.$route.query.id_user?this.id_user=0:this.id_user=this.$route.query.id_user},computed:function(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?v(Object(source),!0).forEach((function(e){Object(r.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):v(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}({},Object(o.b)(["isAuthenticated","loggedInUser"])),mounted:function(){this.id_user>0&&this.getUser()},data:function(){return{url_server:this.$store.state.url_server,attributes:[{}],id_user_app:this.$auth.user.id,user_app:this.$auth.user.username,url_list:"/edit/users",id_user:0,nom:"",prenom:"",email:"",id_droit:0,invitation:0,nb_invitation:0,isSendInvitation:!1,user:[]}},methods:{getUser:function(){var t=this;d.a.get(this.url_server+"/getUser?id_user="+this.id_user).then((function(e){t.user=e.data.liste,t.nom=t.user.nom,t.prenom=t.user.prenom,t.email=t.user.email,t.id_droit=t.user.id_droit,t.nb_invitation=t.user.invitation})).catch((function(e){t.id_user=0,displayErreur("erreur de chargement de l'utilisateur")}))},submit:function(){var t=this;clearRequired(),this.hideErreur();m()(this.date_depart).format("YYYY-MM-DD, h:mm:ss"),m()(this.date_retour).format("YYYY-MM-DD, h:mm:ss");var data={id_user:this.id_user,nom:this.nom,prenom:this.prenom,email:this.email,id_droit:this.id_droit},e=document.querySelectorAll(".required_field");if([].forEach.call(e,(function(t){""==t.value&&t.classList.add("required")})),checkRequired())displayErreur("The fields indicated are required");else{disabledActions();setTimeout((function(){d.a.post(t.url_server+"/addUser",data).then((function(e){t.id_user=e.data.id_user,t.$router.push("/edit/users")})).catch((function(t){enabledActions(),displayErreur("Erreur lors de l'ajout d'un utilisateur")}))}),1e3)}},sendInvitation:function(){var t=this;if(!this.invitation){document.getElementById("invitation").disabled=!0,this.isSendInvitation=!0;setTimeout((function(){d.a.get(t.url_server+"/invitationUser?id_user="+t.id_user+"&name_from="+t.user_app).then((function(e){document.getElementById("invitation").disabled=!1,t.invitation=0,t.nb_invitation=e.data.nb_invitation,t.isSendInvitation=!1,displayErreur("The invitation has been sent")})).catch((function(e){displayErreur("erreur lors de l'envoi de l'invitation"),document.getElementById("invitation").disabled=!1,t.invitation=0,t.isSendInvitation=!1}))}),1500)}},hideErreur:function(t){function e(){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}((function(){hideErreur()})),cancelForm:function(t){this.$router.push(t)},initForm:function(t){t.target.classList.contains("required")&&t.target.classList.remove("required"),enabledActions(),hideErreur()}}},h=j,f=n(10),component=Object(f.a)(h,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container"},[n("div",{staticClass:"list-container edit-container edit-form"},[n("div",{staticClass:"edit-container-header"},[n("h1",[t._v("User")]),n("div",{staticClass:"add"},[n("NuxtLink",{attrs:{to:"/edit/users"}},[n("svg",{staticClass:"h-6 w-6",attrs:{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"}},[n("path",{attrs:{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M4 10h16M4 14h16M4 18h16"}})])])],1)]),t._v(" "),n("div",{staticClass:"form-container"},[n("form",{attrs:{method:"post",autocomplete:"off"},on:{submit:function(e){return e.preventDefault(),t.submit.apply(null,arguments)}}},[n("div",{staticClass:"form-bloc"},[n("div",{staticClass:"col w-full"},[n("div",{staticClass:"col-content row items-center"},[n("div",{staticClass:"relative  inline-block w-9 mr-2 align-middle select-none transition duration-200 ease-in"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.id_droit,expression:"id_droit"}],staticClass:"toggle-checkbox",attrs:{type:"checkbox",name:"id_droit",id:"id_droit",value:"1"},domProps:{checked:Array.isArray(t.id_droit)?t._i(t.id_droit,"1")>-1:t.id_droit},on:{change:function(e){var n=t.id_droit,r=e.target,o=!!r.checked;if(Array.isArray(n)){var l=t._i(n,"1");r.checked?l<0&&(t.id_droit=n.concat(["1"])):l>-1&&(t.id_droit=n.slice(0,l).concat(n.slice(l+1)))}else t.id_droit=o}}}),t._v(" "),n("label",{staticClass:"toggle-label",attrs:{for:"id_droit"}})]),t._v(" "),n("label",{attrs:{for:"id_droit",id:"Lid_droit"}},[t._v("Admin")])])])]),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:0!=t.id_user,expression:"id_user != 0"}],staticClass:"form-bloc"},[n("div",{staticClass:"col w-full"},[n("div",{staticClass:"col-content row items-top"},[n("div",{staticClass:"relative  inline-block w-9 mr-2 align-middle select-none transition duration-200 ease-in"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.invitation,expression:"invitation"}],staticClass:"toggle-checkbox",attrs:{type:"checkbox",name:"invitation",id:"invitation",value:"1"},domProps:{checked:Array.isArray(t.invitation)?t._i(t.invitation,"1")>-1:t.invitation},on:{click:t.sendInvitation,change:function(e){var n=t.invitation,r=e.target,o=!!r.checked;if(Array.isArray(n)){var l=t._i(n,"1");r.checked?l<0&&(t.invitation=n.concat(["1"])):l>-1&&(t.invitation=n.slice(0,l).concat(n.slice(l+1)))}else t.invitation=o}}}),t._v(" "),n("label",{staticClass:"toggle-label",attrs:{for:"invitation"}})]),t._v(" "),n("div",[n("label",{attrs:{for:"invitation",id:"Linvitation"}},[n("span",{directives:[{name:"show",rawName:"v-show",value:!t.isSendInvitation,expression:"!isSendInvitation"}]},[t._v("Send an invitation")]),n("span",{directives:[{name:"show",rawName:"v-show",value:t.isSendInvitation,expression:"isSendInvitation"}]},[t._v("Sending the invitation in progress...")])]),t._v(" "),n("div",{staticClass:"block"},[t._v("Invitation sent: "+t._s(t.nb_invitation))])])])])]),t._v(" "),n("div",{staticClass:"form-bloc"},[n("div",{staticClass:"col w-full"},[n("div",{staticClass:"col-content"},[n("label",{attrs:{for:"nom",id:"Lnom"}},[t._v("Last Name")]),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.nom,expression:"nom"}],staticClass:"required_field",attrs:{type:"text",name:"nom",id:"nom",value:""},domProps:{value:t.nom},on:{focus:t.initForm,input:function(e){e.target.composing||(t.nom=e.target.value)}}})])])]),t._v(" "),n("div",{staticClass:"form-bloc"},[n("div",{staticClass:"col w-full"},[n("div",{staticClass:"col-content"},[n("label",{attrs:{for:"prenom",id:"Lprenom"}},[t._v("First name")]),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.prenom,expression:"prenom"}],attrs:{type:"text",name:"prenom",id:"prenom",value:""},domProps:{value:t.prenom},on:{focus:t.initForm,input:function(e){e.target.composing||(t.prenom=e.target.value)}}})])])]),t._v(" "),n("div",{staticClass:"form-bloc"},[n("div",{staticClass:"col w-full"},[n("div",{staticClass:"col-content"},[n("label",{attrs:{for:"email",id:"Lemail"}},[t._v("E-mail")]),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.email,expression:"email"}],staticClass:"required_field",attrs:{type:"email",name:"email",id:"email",value:""},domProps:{value:t.email},on:{focus:t.initForm,input:function(e){e.target.composing||(t.email=e.target.value)}}})])])]),t._v(" "),n("div",{staticClass:"form-action"},[n("div",[n("button",{attrs:{type:"button"},on:{click:function(e){return t.cancelForm(t.url_list)}}},[t._v("Cancel")])]),t._v(" "),t._m(0)])])])])])}),[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("button",{attrs:{type:"submit"}},[t._v("Save")])])}],!1,null,null,null);e.default=component.exports}}]);