(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{264:function(t,e,r){"use strict";var n=r(6),o=r(54),c=r(265),l=r(184),d=r(5),h=1..toFixed,f=Math.floor,v=function(t,e,r){return 0===e?r:e%2==1?v(t,e-1,r*t):v(t*t,e/2,r)},_=function(data,t,e){for(var r=-1,n=e;++r<6;)n+=t*data[r],data[r]=n%1e7,n=f(n/1e7)},m=function(data,t){for(var e=6,r=0;--e>=0;)r+=data[e],data[e]=f(r/t),r=r%t*1e7},w=function(data){for(var t=6,s="";--t>=0;)if(""!==s||0===t||0!==data[t]){var e=String(data[t]);s=""===s?e:s+l.call("0",7-e.length)+e}return s};n({target:"Number",proto:!0,forced:h&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!d((function(){h.call({})}))},{toFixed:function(t){var e,r,n,d,h=c(this),f=o(t),data=[0,0,0,0,0,0],y="",x="0";if(f<0||f>20)throw RangeError("Incorrect fraction digits");if(h!=h)return"NaN";if(h<=-1e21||h>=1e21)return String(h);if(h<0&&(y="-",h=-h),h>1e-21)if(r=(e=function(t){for(var e=0,r=t;r>=4096;)e+=12,r/=4096;for(;r>=2;)e+=1,r/=2;return e}(h*v(2,69,1))-69)<0?h*v(2,-e,1):h/v(2,e,1),r*=4503599627370496,(e=52-e)>0){for(_(data,0,r),n=f;n>=7;)_(data,1e7,0),n-=7;for(_(data,v(10,n,1),0),n=e-1;n>=23;)m(data,1<<23),n-=23;m(data,1<<n),_(data,1,1),m(data,2),x=w(data)}else _(data,0,r),_(data,1<<-e,0),x=w(data)+l.call("0",f);return x=f>0?y+((d=x.length)<=f?"0."+l.call("0",f-d)+x:x.slice(0,d-f)+"."+x.slice(d-f)):y+x}})},265:function(t,e){var r=1..valueOf;t.exports=function(t){return r.call(t)}},433:function(t,e,r){"use strict";r.r(e);r(26),r(19),r(20),r(37),r(25),r(38);var n=r(11),o=(r(263),r(264),r(9),r(62),r(47),r(53),r(27)),c=r(63),l=r.n(c),d=r(266);function h(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,r)}return e}var f={name:"edit-media",layout:"edit",middleware:"auth",components:{draggable:r.n(d).a},computed:function(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?h(Object(source),!0).forEach((function(e){Object(n.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):h(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}({},Object(o.b)(["isAuthenticated","loggedInUser"])),created:function(){},mounted:function(){this.getTranches()},data:function(){return{url_server:this.$store.state.url_server,flexIsFile:"",source:this.tranche_source,id_parent:this.tranche_id_parent,id_tranche:0,isNew_tranche:!1,tranches:[],tranche:"",isShowLoadingTranches:!0,isShowNoResultTranches:!1,titre:"",tps_debut:0,tps_fin:0}},props:{tranche_source:String,tranche_id_parent:Number},methods:{getTranches:function(){var t=this;this.isShowNoResultTranches=!1,l.a.get(this.url_server+"/getTranches?id_interview="+this.id_parent).then((function(e){console.log("getTranches"),t.isShowLoadingTranches=!1,t.tranches=e.data.liste,console.log("getTranches : "+t.tranches.length),0==t.tranches.length&&(t.isShowNoResultTranches=!0)})).catch((function(t){displayErreur("tranches loading error")}))},getTranche:function(){var t=this;l.a.get(this.url_server+"/getTranche?id_tranche="+this.id_tranche).then((function(e){t.tranche=e.data.liste,void 0!==t.tranche.titre?(t.titre=t.tranche.titre,t.tps_debut=t.tranche.tps_debut.toFixed(2),t.tps_fin=t.tranche.tps_fin.toFixed(2)):(t.tps_debut=0,t.tps_fin=0)})).catch((function(e){t.tps_debut=0,t.tps_fin=0,t.id_tranche=0,displayErreur("tranche loading error")}))},delTranche:function(){var t=this;l.a.get(this.url_server+"/delTranche?id_tranche="+this.id_tranche).then((function(e){t.displayTranche(),t.getTranches()})).catch((function(e){t.id_tranche=0,displayErreur("tranche deleting error")}))},submitTrancheForm:function(){var t=this;clearRequiredModal(),this.hideErreur(),this.isNew_tranche=!1,0==this.id_tranche&&(this.isNew_tranche=!0);var data={id_tranche:this.id_tranche,id_interview:this.id_parent,titre:this.titre,tps_debut:this.tps_debut,tps_fin:this.tps_fin,isNew:this.isNew_tranche},e=document.querySelectorAll(".modalZone .required_field");[].forEach.call(e,(function(t){""==t.value&&t.classList.add("required")})),""==this.titre&&document.getElementById("titre_resume").classList.add("required"),""==this.tps_debut&&(this.tps_debut=0),0==this.tps_debut&&document.getElementById("tps_debut").classList.add("required"),""==this.tps_fin&&(this.tps_fin=0),0==this.tps_fin&&document.getElementById("tps_fin").classList.add("required"),checkRequiredModal()?displayErreur("Les champs en rouges sont requis"):(disabledActionsModal(),l.a.post(this.url_server+"/addTranche",data).then((function(e){t.id_tranche=e.data.id_tranche,t.isShowNoResultTranche=!1,t.displayTranche(),t.tranches=new Array,t.getTranches()})).catch((function(t){enabledActionsModal(),displayErreur("Error adding tranche : "+t)})))},isNumber:function(t){return!isNaN(parseFloat(t))&&isFinite(t)},displayTranche:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=document.querySelectorAll("#defaultModal")[0];e.classList.contains("hidden")?(e.classList.remove("hidden"),e.focus(),this.id_tranche=t,0!=this.id_tranche?this.getTranche():(this.titre="",this.tps_debut=0,this.tps_fin=0,this.id_tranche=0)):(this.id_tranche=0,this.titre="",this.tps_debut=0,this.tps_fin=0,e.classList.add("hidden"),this.initForm())},hideErreur:function(t){function e(){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}((function(){hideErreur()})),initForm:function(t){void 0!==t?t.target.classList.contains("required")&&t.target.classList.remove("required"):clearRequiredModal(),enabledActionsModal(),hideErreur()},onEndPosition:function(){var data={id_tranche:this.id_tranche,list:this.tranches};l.a.post(this.url_server+"/updateTranchePosition",data).then((function(t){})).catch((function(t){return displayErreur("error updating tranches")}))},formatResume:function(t,e){return(parseFloat(e).toFixed(2)-parseFloat(t).toFixed(2)).toFixed(2).toString().replace(".",":")}}},v=f,_=r(10),component=Object(_.a)(v,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("div",{staticClass:"form-bloc form-bloc-list mt-6"},[r("div",{staticClass:"col w-full"},[r("div",{staticClass:"col-content"},[r("label",{staticClass:"mb-3 border-b border-mainColor cursor-pointer",attrs:{for:"AddFile",id:"LAddFile"},on:{click:function(e){t.displayTranche(0),t.hideErreur()}}},[r("div",{staticClass:"pb-2"},[t._v("Résumés")]),t._v(" "),r("div",{staticClass:"flex-1 text-right flex justify-end add highlight"},[r("svg",{staticClass:"w-5 h-5",attrs:{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"}},[r("path",{attrs:{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"}})])])]),t._v(" "),r("div",{directives:[{name:"show",rawName:"v-show",value:t.isShowLoadingTranches,expression:"isShowLoadingTranches"}],staticClass:"loading"},[t._v("Chargement...")]),t._v(" "),r("div",{directives:[{name:"show",rawName:"v-show",value:t.isShowNoResultTranches,expression:"isShowNoResultTranches"}],staticClass:"loading"},[t._v("aucun résumé.")]),t._v(" "),r("draggable",{attrs:{list:t.tranches,tag:"div"},on:{end:t.onEndPosition}},t._l(t.tranches,(function(e,n){return r("div",{staticClass:"relative cursor-pointer"},[r("div",{staticClass:"w-full mb-3 flex items-start justify-between hover:text-activeColor",on:{click:function(r){t.displayTranche(e.id_tranche),t.hideErreur()}}},[r("div",[t._v(t._s(e.titre))]),t._v(" "),r("div",{staticClass:"text-right pl-3"},[t._v(t._s(t.formatResume(e.tps_debut,e.tps_fin)))])])])})),0)],1)])]),t._v(" "),r("div",{staticClass:"modalZone hidden overflow-y-auto overflow-x-hidden bg-mainBg/50 flex fixed right-0 left-0 top-4 z-50 justify-center items-center md:h-full md:inset-0",attrs:{id:"defaultModal",tabindex:"1"},on:{keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"esc",27,e.key,["Esc","Escape"])?null:t.displayTranche(0)}}},[r("div",{staticClass:"relative px-6 w-full max-w-2xl h-full md:h-auto"},[r("div",{staticClass:"relative bg-mainBg p-6 border border-activeColor"},[r("div",{staticClass:"flex justify-between items-start border-b border-mainColor"},[r("h1",[t._v("Résumé")]),t._v(" "),r("div",{staticClass:"bg-transparent ml-auto inline-flex items-center highlight",attrs:{"data-modal-toggle":"defaultModal"}},[r("svg",{staticClass:"big cursor-pointer",attrs:{fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},on:{click:function(e){return t.displayTranche()}}},[r("path",{attrs:{"fill-rule":"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z","clip-rule":"evenodd"}})])])]),t._v(" "),r("div",[r("div",{staticClass:"form-container w-full border-0 p-0"},[r("form",{attrs:{method:"post",autocomplete:"off"},on:{submit:function(e){return e.preventDefault(),t.submitTrancheForm.apply(null,arguments)}}},[r("div",{staticClass:"form-bloc mt-9"},[r("div",{staticClass:"col w-full"},[r("div",{staticClass:"col-content"},[r("label",{attrs:{for:"titre",id:"Ltitre"}},[t._v("Titre")]),t._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:t.titre,expression:"titre"}],attrs:{type:"text",name:"titre",id:"titre_resume"},domProps:{value:t.titre},on:{focus:t.initForm,input:function(e){e.target.composing||(t.titre=e.target.value)}}})])])]),t._v(" "),r("div",{staticClass:"form-bloc"},[r("div",{staticClass:"col w-full"},[r("div",{staticClass:"col-content"},[r("label",{attrs:{for:"tps_debut",id:"Ltps_debut"}},[t._v("Début")]),t._v(" "),r("div",{staticClass:"relative mt-1"},[r("div",{staticClass:"flex absolute inset-y-0 right-0 items-center pointer-events-none text-activeColor pr-3"},[t._v("sec")]),t._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:t.tps_debut,expression:"tps_debut"}],attrs:{type:"text",name:"tps_debut",id:"tps_debut"},domProps:{value:t.tps_debut},on:{focus:t.initForm,input:function(e){e.target.composing||(t.tps_debut=e.target.value)}}})])])])]),t._v(" "),r("div",{staticClass:"form-bloc"},[r("div",{staticClass:"col w-full"},[r("div",{staticClass:"col-content"},[r("label",{attrs:{for:"tps_fin",id:"Ltps_fin"}},[t._v("Fin")]),t._v(" "),r("div",{staticClass:"relative mt-1"},[r("div",{staticClass:"flex absolute inset-y-0 right-0 items-center pointer-events-none text-activeColor pr-3"},[t._v("sec")]),t._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:t.tps_fin,expression:"tps_fin"}],attrs:{type:"text",name:"tps_fin",id:"tps_fin"},domProps:{value:t.tps_fin},on:{focus:t.initForm,input:function(e){e.target.composing||(t.tps_fin=e.target.value)}}})])])])]),t._v(" "),r("div",{staticClass:"form-action"},[r("div",[r("button",{attrs:{type:"button"},on:{click:function(e){return t.displayTranche()}}},[t._v("Annuler")])]),t._v(" "),r("div",{directives:[{name:"show",rawName:"v-show",value:0!=t.id_tranche,expression:"id_tranche != 0"}]},[r("button",{staticClass:"bt-delete",attrs:{type:"button"},on:{click:function(e){return t.delTranche()}}},[t._v("Supprimer")])]),t._v(" "),t._m(0)])])])])])])])])}),[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("button",{attrs:{type:"submit"}},[t._v("Enregistrer")])])}],!1,null,null,null);e.default=component.exports}}]);