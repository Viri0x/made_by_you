exports.ids = [3];
exports.modules = {

/***/ 74:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__);

// CONCATENATED MODULE: ./node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/@nuxt/components/dist/loader.js??ref--0-0!./node_modules/vue-loader/lib??vue-loader-options!./components/editLien.vue?vue&type=template&id=8b45affa&
var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_vm._ssrNode("<div class=\"form-bloc form-bloc-list mt-6\">","</div>",[_vm._ssrNode("<div class=\"col w-full\">","</div>",[_vm._ssrNode("<div class=\"col-content\">","</div>",[_vm._ssrNode("<label for=\"AddFile\" id=\"LAddFile\" class=\"mb-3 border-b border-mainColor cursor-pointer\"><div class=\"pb-2\">Liens</div> <div class=\"flex-1 text-right flex justify-end add highlight\"><svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\" class=\"w-5 h-5\"><path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M12 4v16m8-8H4\"></path></svg></div></label> <div class=\"loading\""+(_vm._ssrStyle(null,null, { display: (_vm.isShowLoadingLiens) ? '' : 'none' }))+">Chargement...</div> <div class=\"loading\""+(_vm._ssrStyle(null,null, { display: (_vm.isShowNoResultLiens) ? '' : 'none' }))+">aucun lien.</div> "),_c('draggable',{attrs:{"list":_vm.liens,"tag":"div"},on:{"end":_vm.onEndPosition}},_vm._l((_vm.liens),function(lien,indexLien){return _c('div',{staticClass:"relative cursor-pointer"},[_c('div',{staticClass:"w-full mb-3 flex items-start justify-between hover:text-activeColor",on:{"click":function($event){_vm.displayLien(lien.id_lien);_vm.hideErreur();}}},[_c('div',[_vm._v(_vm._s(lien.titre))])])])}),0)],2)])]),_vm._ssrNode(" <div id=\"defaultModal\" tabindex=\"1\" class=\"modalZone hidden overflow-y-auto overflow-x-hidden bg-mainBg/50 flex fixed right-0 left-0 top-4 z-50 justify-center items-center md:h-full md:inset-0\"><div class=\"relative px-6 w-full max-w-2xl h-full md:h-auto\"><div class=\"relative bg-mainBg p-6 border border-activeColor\"><div class=\"flex justify-between items-start border-b border-mainColor\"><h1>Lien</h1> <div data-modal-toggle=\"defaultModal\" class=\"bg-transparent ml-auto inline-flex items-center highlight\"><svg fill=\"currentColor\" viewBox=\"0 0 20 20\" xmlns=\"http://www.w3.org/2000/svg\" class=\"big cursor-pointer\"><path fill-rule=\"evenodd\" d=\"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z\" clip-rule=\"evenodd\"></path></svg></div></div> <div><div class=\"form-container w-full border-0 p-0\"><form method=\"post\" autocomplete=\"off\"><div class=\"form-bloc mt-9\"><div class=\"col w-full\"><div class=\"col-content\"><label for=\"titre\" id=\"Ltitre\">Libell√©</label> <input type=\"text\" name=\"titre\" id=\"titre_lien\""+(_vm._ssrAttr("value",(_vm.titre)))+"></div></div></div> <div class=\"form-bloc\"><div class=\"col w-full\"><div class=\"col-content\"><label for=\"url\" id=\"Lurl\">Url</label> <input type=\"text\" name=\"url\" id=\"url_lien\""+(_vm._ssrAttr("value",(_vm.url)))+"></div></div></div> <div class=\"form-action\"><div><button type=\"button\">Annuler</button></div> <div"+(_vm._ssrStyle(null,null, { display: (_vm.id_lien != 0) ? '' : 'none' }))+"><button type=\"button\" class=\"bt-delete\">Supprimer</button></div> <div><button type=\"submit\">Enregistrer</button></div></div></form></div></div></div></div></div>")],2)}
var staticRenderFns = []


// CONCATENATED MODULE: ./components/editLien.vue?vue&type=template&id=8b45affa&

// EXTERNAL MODULE: external "vuex"
var external_vuex_ = __webpack_require__(3);

// EXTERNAL MODULE: external "axios"
var external_axios_ = __webpack_require__(6);
var external_axios_default = /*#__PURE__*/__webpack_require__.n(external_axios_);

// EXTERNAL MODULE: external "vuedraggable"
var external_vuedraggable_ = __webpack_require__(12);
var external_vuedraggable_default = /*#__PURE__*/__webpack_require__.n(external_vuedraggable_);

// CONCATENATED MODULE: ./node_modules/babel-loader/lib??ref--2-0!./node_modules/@nuxt/components/dist/loader.js??ref--0-0!./node_modules/vue-loader/lib??vue-loader-options!./components/editLien.vue?vue&type=script&lang=js&
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//



/* harmony default export */ var editLienvue_type_script_lang_js_ = ({
  name: 'edit-media',
  layout: 'edit',
  middleware: 'auth',
  components: {
    draggable: external_vuedraggable_default.a
  },
  computed: { ...Object(external_vuex_["mapGetters"])(['isAuthenticated', 'loggedInUser'])
  },

  created() {},

  mounted() {
    this.getLiens();
  },

  data() {
    return {
      url_server: this.$store.state.url_server,
      flexIsFile: '',
      source: this.lien_source,
      id_parent: this.lien_id_parent,
      id_lien: 0,
      isNew_lien: false,
      liens: [],
      lien: '',
      isShowLoadingLiens: true,
      isShowNoResultLiens: false,
      titre: '',
      url: ''
    };
  },

  props: {
    lien_source: String,
    lien_id_parent: Number
  },
  methods: {
    getLiens: function () {
      this.isShowNoResultLiens = false;
      external_axios_default.a.get(this.url_server + "/getLiens?id_intervenant=" + this.id_parent).then(response => {
        this.isShowLoadingLiens = false;
        this.liens = response.data.liste;
        if (this.liens.length == 0) this.isShowNoResultLiens = true;
      }).catch(error => {
        displayErreur('liens loading error');
      });
    },
    getLien: function () {
      external_axios_default.a.get(this.url_server + "/getLien?id_lien=" + this.id_lien).then(response => {
        this.lien = response.data.liste;

        if (typeof this.lien.titre !== 'undefined') {
          this.titre = this.lien.titre;
          this.url = this.lien.url;
        } else {
          this.titre = '';
          this.url = '';
        }
      }).catch(error => {
        this.titre = '';
        this.url = '';
        this.id_lien = 0;
        displayErreur("lien loading error");
      });
    },
    delLien: function () {
      external_axios_default.a.get(this.url_server + "/delLien?id_lien=" + this.id_lien).then(response => {
        this.displayLien();
        this.getLiens();
      }).catch(error => {
        this.id_lien = 0;
        displayErreur("lien deleting error");
      });
    },

    submitLienForm() {
      var erreur = 'Les champs en rouges sont requis';
      clearRequiredModal();
      this.hideErreur();
      this.isNew_lien = false;
      if (this.id_lien == 0) this.isNew_lien = true;
      let data = {
        id_lien: this.id_lien,
        id_intervenant: this.id_parent,
        titre: this.titre,
        url: this.url,
        isNew: this.isNew_lien
      };
      var elems = document.querySelectorAll(".modalZone .required_field");
      [].forEach.call(elems, function (el) {
        if (el.value == '') {
          el.classList.add("required");
        }
      });

      if (this.titre == '') {
        document.getElementById("titre_lien").classList.add("required");
      }

      if (this.url == '') {
        document.getElementById("url_lien").classList.add("required");
      }

      if (checkRequiredModal()) {
        displayErreur(erreur);
      } else {
        disabledActionsModal();
        external_axios_default.a.post(this.url_server + "/addLien", data).then(response => {
          this.id_lien = response.data.id_lien;
          this.isShowNoResultLien = false;
          this.displayLien();
          this.liens = new Array();
          this.getLiens();
        }).catch(error => {
          enabledActionsModal();
          displayErreur("Error adding lien : " + error);
        });
      }
    },

    isNumber(n) {
      return !isNaN(parseFloat(n)) && isFinite(n);
    },

    displayLien: function (id_lien = 0) {
      var _element = document.querySelectorAll("#defaultModal")[0];

      if (_element.classList.contains('hidden')) {
        _element.classList.remove("hidden");

        _element.focus();

        this.id_lien = id_lien;

        if (this.id_lien != 0) {
          this.getLien();
        } else {
          this.titre = '';
          this.url = '';
          this.id_lien = 0;
        }
      } else {
        this.id_lien = 0;
        this.titre = '';
        this.url = '';

        _element.classList.add("hidden");

        this.initForm();
      }
    },
    hideErreur: function () {
      hideErreur();
    },
    initForm: function (event) {
      if (typeof event !== 'undefined') {
        if (event.target.classList.contains("required")) event.target.classList.remove("required");
      } else {
        clearRequiredModal();
      }

      enabledActionsModal();
      hideErreur();
    },

    onEndPosition() {
      let data = {
        id_lien: this.id_lien,
        list: this.liens
      };
      external_axios_default.a.post(this.url_server + "/updateLienPosition", data).then(response => {}).catch(error => displayErreur("error updating liens"));
    }

  }
});
// CONCATENATED MODULE: ./components/editLien.vue?vue&type=script&lang=js&
 /* harmony default export */ var components_editLienvue_type_script_lang_js_ = (editLienvue_type_script_lang_js_); 
// EXTERNAL MODULE: ./node_modules/vue-loader/lib/runtime/componentNormalizer.js
var componentNormalizer = __webpack_require__(2);

// CONCATENATED MODULE: ./components/editLien.vue



function injectStyles (context) {
  
  
}

/* normalize component */

var component = Object(componentNormalizer["a" /* default */])(
  components_editLienvue_type_script_lang_js_,
  render,
  staticRenderFns,
  false,
  injectStyles,
  null,
  "04df5d92"
  
)

/* harmony default export */ var editLien = __webpack_exports__["default"] = (component.exports);

/***/ })

};;
//# sourceMappingURL=edit-lien.js.map