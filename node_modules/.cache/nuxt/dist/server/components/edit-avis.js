exports.ids = [1];
exports.modules = {

/***/ 72:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__);

// CONCATENATED MODULE: ./node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/@nuxt/components/dist/loader.js??ref--0-0!./node_modules/vue-loader/lib??vue-loader-options!./components/editAvis.vue?vue&type=template&id=04674c49&
var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_vm._ssrNode("<div class=\"form-bloc form-bloc-list\">","</div>",[_vm._ssrNode("<div class=\"col w-full\">","</div>",[_vm._ssrNode("<div class=\"col-content\">","</div>",[_vm._ssrNode("<label for=\"AddFile\" id=\"LAddFile\" class=\"mb-3 border-b border-mainColor cursor-pointer\"><div class=\"pb-2\">Question / réponse</div> <div class=\"flex-1 text-right flex justify-end add highlight\"><svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\" class=\"w-5 h-5\"><path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M12 4v16m8-8H4\"></path></svg></div></label> <div class=\"loading\""+(_vm._ssrStyle(null,null, { display: (_vm.isShowLoadingAvis) ? '' : 'none' }))+">Chargement...</div> <div class=\"loading\""+(_vm._ssrStyle(null,null, { display: (_vm.isShowNoResultAvis) ? '' : 'none' }))+">aucun avis.</div> "),_c('draggable',{attrs:{"list":_vm.aviss,"tag":"div"},on:{"end":_vm.onEndPosition}},_vm._l((_vm.aviss),function(avis,indexAvis){return _c('div',{staticClass:"relative cursor-pointer"},[_c('div',{staticClass:"w-full mb-3 flex items-start justify-between hover:text-activeColor",on:{"click":function($event){_vm.displayAvis(avis.id_avis);_vm.hideErreur();}}},[_c('div',[_vm._v(_vm._s(avis.titre))])])])}),0)],2)])]),_vm._ssrNode(" "),_vm._ssrNode("<div id=\"defaultModalAvis\" tabindex=\"1\" class=\"modalZone2 hidden overflow-y-auto overflow-x-hidden bg-mainBg/50 flex fixed right-0 left-0 top-4 z-50 justify-center items-center md:h-full md:inset-0\">","</div>",[_vm._ssrNode("<div class=\"relative px-6 w-full max-w-2xl h-full md:h-auto\">","</div>",[_vm._ssrNode("<div class=\"relative bg-mainBg p-6 border border-activeColor\">","</div>",[_vm._ssrNode("<div class=\"flex justify-between items-start border-b border-mainColor\"><h1>Avis</h1> <div data-modal-toggle=\"defaultModalAvis\" class=\"bg-transparent ml-auto inline-flex items-center highlight\"><svg fill=\"currentColor\" viewBox=\"0 0 20 20\" xmlns=\"http://www.w3.org/2000/svg\" class=\"big cursor-pointer\"><path fill-rule=\"evenodd\" d=\"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z\" clip-rule=\"evenodd\"></path></svg></div></div> "),_vm._ssrNode("<div>","</div>",[_vm._ssrNode("<div class=\"form-container w-full border-0 p-0\">","</div>",[_vm._ssrNode("<form method=\"post\" autocomplete=\"off\">","</form>",[_vm._ssrNode("<div class=\"form-bloc mt-9\"><div class=\"col w-full\"><div class=\"col-content\"><label for=\"titre\" id=\"Ltitre\">Question</label> <input type=\"text\" name=\"titre\" id=\"titre_avis\""+(_vm._ssrAttr("value",(_vm.titre)))+"></div></div></div> "),_vm._ssrNode("<div class=\"form-bloc mt-9\">","</div>",[_vm._ssrNode("<div class=\"col w-full\">","</div>",[_vm._ssrNode("<div class=\"col-content\">","</div>",[_vm._ssrNode("<label for=\"texte\" id=\"Ltexte\">Réponse</label> "),_vm._ssrNode("<div>","</div>",[_c('quill-editor',{ref:"editor",attrs:{"options":_vm.editorOption},model:{value:(_vm.texte),callback:function ($$v) {_vm.texte=$$v},expression:"texte"}})],1)],2)])]),_vm._ssrNode(" <div class=\"form-action\"><div><button type=\"button\">Annuler</button></div> <div"+(_vm._ssrStyle(null,null, { display: (_vm.id_avis != 0) ? '' : 'none' }))+"><button type=\"button\" class=\"bt-delete\">Supprimer</button></div> <div><button type=\"submit\">Enregistrer</button></div></div>")],2)])])],2)])])],2)}
var staticRenderFns = []


// CONCATENATED MODULE: ./components/editAvis.vue?vue&type=template&id=04674c49&

// EXTERNAL MODULE: external "vuex"
var external_vuex_ = __webpack_require__(3);

// EXTERNAL MODULE: external "axios"
var external_axios_ = __webpack_require__(6);
var external_axios_default = /*#__PURE__*/__webpack_require__.n(external_axios_);

// EXTERNAL MODULE: external "vuedraggable"
var external_vuedraggable_ = __webpack_require__(12);
var external_vuedraggable_default = /*#__PURE__*/__webpack_require__.n(external_vuedraggable_);

// CONCATENATED MODULE: ./node_modules/babel-loader/lib??ref--2-0!./node_modules/@nuxt/components/dist/loader.js??ref--0-0!./node_modules/vue-loader/lib??vue-loader-options!./components/editAvis.vue?vue&type=script&lang=js&
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//



/* harmony default export */ var editAvisvue_type_script_lang_js_ = ({
  name: 'edit-media',
  layout: 'edit',
  middleware: 'auth',
  components: {
    draggable: external_vuedraggable_default.a
  },
  computed: { ...Object(external_vuex_["mapGetters"])(['isAuthenticated', 'loggedInUser'])
  },

  created() {},

  mounted() {
    this.getAviss();
  },

  data() {
    return {
      url_server: this.$store.state.url_server,
      flexIsFile: '',
      source: this.avis_source,
      id_parent: this.avis_id_parent,
      id_avis: 0,
      isNew_avis: false,
      aviss: [],
      avis: '',
      isShowLoadingAvis: true,
      isShowNoResultAvis: false,
      titre: '',
      texte: '',
      editorOption: {
        // Some Quill options...
        theme: 'snow',
        modules: {
          toolbar: [['bold', 'italic', 'underline', 'strike'], ['blockquote', 'code-block'], ['link', 'code'], ["source"]]
        }
      }
    };
  },

  props: {
    avis_source: String,
    avis_id_parent: Number
  },
  methods: {
    getAviss: function () {
      this.isShowNoResultAvis = false;
      external_axios_default.a.get(this.url_server + "/getAviss?id_interview=" + this.id_parent).then(response => {
        this.isShowLoadingAvis = false;
        this.aviss = response.data.liste;
        if (this.aviss.length == 0) this.isShowNoResultAvis = true;
      }).catch(error => {
        displayErreur('avis loading error');
      });
    },
    getAvis: function () {
      external_axios_default.a.get(this.url_server + "/getAvis?id_avis=" + this.id_avis).then(response => {
        this.avis = response.data.liste;

        if (typeof this.avis.titre !== 'undefined') {
          this.titre = this.avis.titre;
          this.texte = this.avis.texte;
        } else {
          this.texte = '';
        }
      }).catch(error => {
        this.texte = '';
        this.id_avis = 0;
        displayErreur("avis loading error");
      });
    },
    delAvis: function () {
      external_axios_default.a.get(this.url_server + "/delAvis?id_avis=" + this.id_avis).then(response => {
        this.displayAvis();
        this.getAviss();
      }).catch(error => {
        this.id_avis = 0;
        displayErreur("avis deleting error");
      });
    },

    submitAvisForm() {
      var erreur = 'Les champs en rouges sont requis';
      clearRequiredModal2();
      this.hideErreur();
      this.isNew_avis = false;
      if (this.id_avis == 0) this.isNew_avis = true;
      let data = {
        id_avis: this.id_avis,
        id_interview: this.id_parent,
        titre: this.titre,
        texte: this.texte,
        isNew: this.isNew_avis
      };
      var elems = document.querySelectorAll(".modalZone2 .required_field");
      [].forEach.call(elems, function (el) {
        if (el.value == '') {
          el.classList.add("required");
        }
      });

      if (this.titre == '') {
        document.getElementById("titre_avis").classList.add("required");
      }

      if (checkRequiredModal2()) {
        displayErreur(erreur);
      } else {
        disabledActionsModal2();
        external_axios_default.a.post(this.url_server + "/addAvis", data).then(response => {
          this.id_avis = response.data.id_avis;
          this.isShowNoResultAvis = false;
          this.displayAvis();
          this.aviss = new Array();
          this.getAviss();
        }).catch(error => {
          enabledActionsModal2();
          displayErreur("Error adding avis : " + error);
        });
      }
    },

    isNumber(n) {
      return !isNaN(parseFloat(n)) && isFinite(n);
    },

    displayAvis: function (id_avis = 0) {
      var _element = document.querySelectorAll("#defaultModalAvis")[0];

      if (_element.classList.contains('hidden')) {
        _element.classList.remove("hidden");

        _element.focus();

        this.id_avis = id_avis;

        if (this.id_avis != 0) {
          this.getAvis();
        } else {
          this.titre = '';
          this.texte = '';
          this.id_avis = 0;
        }
      } else {
        this.id_avis = 0;
        this.titre = '';
        this.texte = '';

        _element.classList.add("hidden");

        this.initForm();
      }
    },
    hideErreur: function () {
      hideErreur();
    },
    initForm: function (event) {
      if (typeof event !== 'undefined') {
        if (event.target.classList.contains("required")) event.target.classList.remove("required");
      } else {
        clearRequiredModal2();
      }

      enabledActionsModal2();
      hideErreur();
    },

    onEndPosition() {
      let data = {
        id_avis: this.id_avis,
        list: this.aviss
      };
      external_axios_default.a.post(this.url_server + "/updateAvisPosition", data).then(response => {}).catch(error => displayErreur("error updating avis"));
    },

    formatResume(tps_debut, tps_fin) {
      var val = parseFloat(tps_fin).toFixed(2) - parseFloat(tps_debut).toFixed(2);
      return val.toFixed(2).toString().replace(".", ":");
    }

  }
});
// CONCATENATED MODULE: ./components/editAvis.vue?vue&type=script&lang=js&
 /* harmony default export */ var components_editAvisvue_type_script_lang_js_ = (editAvisvue_type_script_lang_js_); 
// EXTERNAL MODULE: ./node_modules/vue-loader/lib/runtime/componentNormalizer.js
var componentNormalizer = __webpack_require__(2);

// CONCATENATED MODULE: ./components/editAvis.vue



function injectStyles (context) {
  
  
}

/* normalize component */

var component = Object(componentNormalizer["a" /* default */])(
  components_editAvisvue_type_script_lang_js_,
  render,
  staticRenderFns,
  false,
  injectStyles,
  null,
  "44fd4a4b"
  
)

/* harmony default export */ var editAvis = __webpack_exports__["default"] = (component.exports);

/***/ })

};;
//# sourceMappingURL=edit-avis.js.map