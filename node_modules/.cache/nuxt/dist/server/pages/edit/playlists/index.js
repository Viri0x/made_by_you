exports.ids = [19];
exports.modules = {

/***/ 60:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__);

// CONCATENATED MODULE: ./node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/@nuxt/components/dist/loader.js??ref--0-0!./node_modules/vue-loader/lib??vue-loader-options!./pages/edit/playlists/index.vue?vue&type=template&id=8130eef0&
var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:"container no-scrollbar edit-form-nav"},[_vm._ssrNode("<div class=\"list-container edit-container w-full\">","</div>",[_vm._ssrNode("<div class=\"edit-container-header\">","</div>",[_vm._ssrNode("<h1>Playlists</h1>"),_vm._ssrNode("<div class=\"add highlight\">","</div>",[_c('NuxtLink',{attrs:{"to":{ path: _vm.url_add}}},[_c('svg',{staticClass:"big",attrs:{"xmlns":"http://www.w3.org/2000/svg","fill":"none","viewBox":"0 0 24 24","stroke":"currentColor"}},[_c('path',{attrs:{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2","d":"M12 4v16m8-8H4"}})])])],1)],2),_vm._ssrNode(" <div class=\"tools\"><div><input placeholder=\"search\" type=\"text\" name=\"recherche\" id=\"recherche\" value></div> <div>"+_vm._ssrEscape(_vm._s(_vm.playlists.length)+" result")+((_vm.playlists.length > 1)?("<span>s</span>"):"<!---->")+"</div></div> "),_vm._ssrNode("<table class=\"w-full\">","</table>",[_vm._ssrNode("<thead>","</thead>",[_vm._ssrNode("<tr class=\"hide\"><th class=\"text-left cursor-pointer isLink\">Title</th> <th class=\"w-6 text-left isLink\"> </th> <th class=\"w-6 text-left\"> </th></tr> "),(!_vm.playlists.length)?_vm._ssrNode("<tr>","</tr>",[_vm._ssrNode("<td colspan=\"4\" class=\"flex\">","</td>",[_vm._ssrNode("<div"+(_vm._ssrStyle(null,null, { display: (_vm.isShowLoading) ? '' : 'none' }))+">Chargement des playlists...</div>"),_vm._ssrNode("<div class=\"flex\""+(_vm._ssrStyle(null,null, { display: (_vm.isShowNoResult) ? '' : 'none' }))+">","</div>",[_vm._ssrNode("<div class=\"pr-1 flex items-center\">","</div>",[_c('NuxtLink',{attrs:{"to":{ path: _vm.url_add}}},[_vm._v("aucun résultat, ajouter une playlist ")])],1),_vm._ssrNode(" "),_vm._ssrNode("<div class=\"add highlight\">","</div>",[_c('NuxtLink',{attrs:{"to":{ path: _vm.url_add}}},[_c('svg',{staticClass:"big",attrs:{"xmlns":"http://www.w3.org/2000/svg","fill":"none","viewBox":"0 0 24 24","stroke":"currentColor"}},[_c('path',{attrs:{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2","d":"M12 4v16m8-8H4"}})])])],1)],2)],2)]):_vm._e()],2),_vm._ssrNode(" "),_c('draggable',{attrs:{"list":_vm.playlists,"tag":"tbody"},on:{"end":_vm.onEndPosition}},_vm._l((_vm.playlists),function(playlist,indexPlaylist){return _c('tr',{staticClass:"border-b border-mainColor isLink"},[_c('td',{on:{"click":function($event){return _vm.getPlaylist(playlist.id_playlist);}}},[_vm._v(_vm._s(playlist.titre))]),_vm._v(" "),_c('td',{staticClass:"actionList",on:{"click":function($event){return _vm.onlineFromList($event,playlist.id_playlist)}}},[(playlist.online==1)?_c('span',[_vm._v("online")]):_c('span',[_vm._v("draft")])]),_vm._v(" "),_c('td',{staticClass:"actionList"},[_c('div',{staticClass:"iconDelete"},[_c('svg',{attrs:{"xmlns":"http://www.w3.org/2000/svg","fill":"none","viewBox":"0 0 24 24","stroke":"currentColor"},on:{"click":function($event){return _vm.deleteFromList($event,playlist.id_playlist)}}},[_c('path',{attrs:{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2","d":"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"}})])]),_vm._v(" "),_c('div',{staticClass:"deleteFromList hidden l flex justify-end  items-center"},[_c('div',{staticClass:"mr-1"},[_c('button',{staticClass:"half",attrs:{"type":"button"},on:{"click":function($event){return _vm.deleteCancelFromList($event)}}},[_vm._v("Cancel")])]),_c('div',[_c('button',{staticClass:"half",attrs:{"type":"button"},on:{"click":function($event){return _vm.deleteConfirmFromList($event,playlist.id_playlist)}}},[_vm._v("Confirm")])])])])])}),0)],2)],2)])}
var staticRenderFns = []


// CONCATENATED MODULE: ./pages/edit/playlists/index.vue?vue&type=template&id=8130eef0&

// EXTERNAL MODULE: external "vuex"
var external_vuex_ = __webpack_require__(3);

// EXTERNAL MODULE: external "axios"
var external_axios_ = __webpack_require__(6);
var external_axios_default = /*#__PURE__*/__webpack_require__.n(external_axios_);

// EXTERNAL MODULE: external "vuedraggable"
var external_vuedraggable_ = __webpack_require__(12);
var external_vuedraggable_default = /*#__PURE__*/__webpack_require__.n(external_vuedraggable_);

// CONCATENATED MODULE: ./node_modules/babel-loader/lib??ref--2-0!./node_modules/@nuxt/components/dist/loader.js??ref--0-0!./node_modules/vue-loader/lib??vue-loader-options!./pages/edit/playlists/index.vue?vue&type=script&lang=js&
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//



/* harmony default export */ var playlistsvue_type_script_lang_js_ = ({
  layout: 'edit',
  middleware: 'auth',
  computed: { ...Object(external_vuex_["mapGetters"])(['isAuthenticated', 'loggedInfont'])
  },
  components: {
    draggable: external_vuedraggable_default.a
  },

  created() {},

  data() {
    return {
      url_server: this.$store.state.url_server,
      url_back: '',
      table: 'playlist',
      isShowLoading: true,
      isShowNoResult: false,
      id_user: this.$auth.user.id,
      playlists: [],
      recherche: "",
      triMode: "ASC",
      triBy: "titre",
      url_add: '/edit/playlists/form?id_playlist=0'
    };
  },

  mounted() {
    this.getPlaylists();
    let spans = document.querySelectorAll('button');
    spans.forEach(el => {
      el.addEventListener('click', this.deleteCancelFromList);
    });
  },

  methods: {
    getPlaylists: function () {
      external_axios_default.a.get(this.url_server + "/getPlaylists?recherche=" + this.recherche + "&triBy=" + this.triBy + "&triMode=" + this.triMode).then(response => {
        this.isShowLoading = false;
        this.playlists = response.data.liste;
        if (this.playlists.length == 0) this.isShowNoResult = true;
      }).catch(error => displayErreur('error loading playlists'));
    },

    getPlaylist(id_playlist) {
      this.$router.push("/edit/playlists/form?id_playlist=" + id_playlist);
    },

    deleteFromList(e, id_playlist) {
      var el = e.target.closest("td");
      el.querySelector('.iconDelete').classList.add("hidden");
      el.querySelector('.deleteFromList').classList.remove("hidden");
    },

    deleteCancelFromList(e) {
      var el = e.target.closest("td");
      el.querySelector('.deleteFromList').classList.add("hidden");
      el.querySelector('.iconDelete').classList.remove("hidden");
    },

    deleteConfirmFromList(e, id_playlist) {
      this.deleteCancelFromList(e);
      external_axios_default.a.get(this.url_server + "/delPlaylist?id_playlist=" + id_playlist).then(response => {
        this.getPlaylists();
      }).catch(error => displayErreur("error deleting playlist"));
    },

    onlineFromList(e, id_playlist) {
      var el = e.target.closest("td");
      external_axios_default.a.get(this.url_server + "/online?table=playlist&libelle=id_playlist&id=" + id_playlist).then(response => {
        if (response.data.status != '') el.innerHTML = response.data.status;
      }).catch(error => displayErreur("error changing playlist state"));
    },

    searchFromList(e) {
      this.getPlaylists();
    },

    sortFromList(val) {
      if (this.triMode == "ASC") this.triMode = "DESC";else this.triMode = "ASC";
      this.triBy = val;
      this.getPlaylists();
    },

    onEndPosition() {
      let data = {
        list: this.playlists
      };
      external_axios_default.a.post(this.url_server + "/updatePlaylistPosition", data).then(response => {}).catch(error => displayErreur("error changing playlist position"));
    }

  }
});
// CONCATENATED MODULE: ./pages/edit/playlists/index.vue?vue&type=script&lang=js&
 /* harmony default export */ var edit_playlistsvue_type_script_lang_js_ = (playlistsvue_type_script_lang_js_); 
// EXTERNAL MODULE: ./node_modules/vue-loader/lib/runtime/componentNormalizer.js
var componentNormalizer = __webpack_require__(2);

// CONCATENATED MODULE: ./pages/edit/playlists/index.vue





/* normalize component */

var component = Object(componentNormalizer["a" /* default */])(
  edit_playlistsvue_type_script_lang_js_,
  render,
  staticRenderFns,
  false,
  null,
  null,
  "28e62d1e"
  
)

/* harmony default export */ var playlists = __webpack_exports__["default"] = (component.exports);

/***/ })

};;
//# sourceMappingURL=index.js.map