{"version":3,"file":"pages/edit/playlists/index.js","sources":["webpack:///./pages/edit/playlists/index.vue?8445","webpack:///./pages/edit/playlists/index.vue","webpack:///./pages/edit/playlists/index.vue?4b2c","webpack:///./pages/edit/playlists/index.vue?d975"],"sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"container no-scrollbar edit-form-nav\"},[_vm._ssrNode(\"<div class=\\\"list-container edit-container w-full\\\">\",\"</div>\",[_vm._ssrNode(\"<div class=\\\"edit-container-header\\\">\",\"</div>\",[_vm._ssrNode(\"<h1>Playlists</h1>\"),_vm._ssrNode(\"<div class=\\\"add highlight\\\">\",\"</div>\",[_c('NuxtLink',{attrs:{\"to\":{ path: _vm.url_add}}},[_c('svg',{staticClass:\"big\",attrs:{\"xmlns\":\"http://www.w3.org/2000/svg\",\"fill\":\"none\",\"viewBox\":\"0 0 24 24\",\"stroke\":\"currentColor\"}},[_c('path',{attrs:{\"stroke-linecap\":\"round\",\"stroke-linejoin\":\"round\",\"stroke-width\":\"2\",\"d\":\"M12 4v16m8-8H4\"}})])])],1)],2),_vm._ssrNode(\" <div class=\\\"tools\\\"><div><input placeholder=\\\"search\\\" type=\\\"text\\\" name=\\\"recherche\\\" id=\\\"recherche\\\" value></div> <div>\"+_vm._ssrEscape(_vm._s(_vm.playlists.length)+\" result\")+((_vm.playlists.length > 1)?(\"<span>s</span>\"):\"<!---->\")+\"</div></div> \"),_vm._ssrNode(\"<table class=\\\"w-full\\\">\",\"</table>\",[_vm._ssrNode(\"<thead>\",\"</thead>\",[_vm._ssrNode(\"<tr class=\\\"hide\\\"><th class=\\\"text-left cursor-pointer isLink\\\">Title</th> <th class=\\\"w-6 text-left isLink\\\"> </th> <th class=\\\"w-6 text-left\\\"> </th></tr> \"),(!_vm.playlists.length)?_vm._ssrNode(\"<tr>\",\"</tr>\",[_vm._ssrNode(\"<td colspan=\\\"4\\\" class=\\\"flex\\\">\",\"</td>\",[_vm._ssrNode(\"<div\"+(_vm._ssrStyle(null,null, { display: (_vm.isShowLoading) ? '' : 'none' }))+\">Chargement des playlists...</div>\"),_vm._ssrNode(\"<div class=\\\"flex\\\"\"+(_vm._ssrStyle(null,null, { display: (_vm.isShowNoResult) ? '' : 'none' }))+\">\",\"</div>\",[_vm._ssrNode(\"<div class=\\\"pr-1 flex items-center\\\">\",\"</div>\",[_c('NuxtLink',{attrs:{\"to\":{ path: _vm.url_add}}},[_vm._v(\"aucun résultat, ajouter une playlist \")])],1),_vm._ssrNode(\" \"),_vm._ssrNode(\"<div class=\\\"add highlight\\\">\",\"</div>\",[_c('NuxtLink',{attrs:{\"to\":{ path: _vm.url_add}}},[_c('svg',{staticClass:\"big\",attrs:{\"xmlns\":\"http://www.w3.org/2000/svg\",\"fill\":\"none\",\"viewBox\":\"0 0 24 24\",\"stroke\":\"currentColor\"}},[_c('path',{attrs:{\"stroke-linecap\":\"round\",\"stroke-linejoin\":\"round\",\"stroke-width\":\"2\",\"d\":\"M12 4v16m8-8H4\"}})])])],1)],2)],2)]):_vm._e()],2),_vm._ssrNode(\" \"),_c('draggable',{attrs:{\"list\":_vm.playlists,\"tag\":\"tbody\"},on:{\"end\":_vm.onEndPosition}},_vm._l((_vm.playlists),function(playlist,indexPlaylist){return _c('tr',{staticClass:\"border-b border-mainColor isLink\"},[_c('td',{on:{\"click\":function($event){return _vm.getPlaylist(playlist.id_playlist);}}},[_vm._v(_vm._s(playlist.titre))]),_vm._v(\" \"),_c('td',{staticClass:\"actionList\",on:{\"click\":function($event){return _vm.onlineFromList($event,playlist.id_playlist)}}},[(playlist.online==1)?_c('span',[_vm._v(\"online\")]):_c('span',[_vm._v(\"draft\")])]),_vm._v(\" \"),_c('td',{staticClass:\"actionList\"},[_c('div',{staticClass:\"iconDelete\"},[_c('svg',{attrs:{\"xmlns\":\"http://www.w3.org/2000/svg\",\"fill\":\"none\",\"viewBox\":\"0 0 24 24\",\"stroke\":\"currentColor\"},on:{\"click\":function($event){return _vm.deleteFromList($event,playlist.id_playlist)}}},[_c('path',{attrs:{\"stroke-linecap\":\"round\",\"stroke-linejoin\":\"round\",\"stroke-width\":\"2\",\"d\":\"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16\"}})])]),_vm._v(\" \"),_c('div',{staticClass:\"deleteFromList hidden l flex justify-end  items-center\"},[_c('div',{staticClass:\"mr-1\"},[_c('button',{staticClass:\"half\",attrs:{\"type\":\"button\"},on:{\"click\":function($event){return _vm.deleteCancelFromList($event)}}},[_vm._v(\"Cancel\")])]),_c('div',[_c('button',{staticClass:\"half\",attrs:{\"type\":\"button\"},on:{\"click\":function($event){return _vm.deleteConfirmFromList($event,playlist.id_playlist)}}},[_vm._v(\"Confirm\")])])])])])}),0)],2)],2)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n\t\n\t\nimport { mapGetters } from 'vuex';\nimport axios from 'axios';\nimport draggable from 'vuedraggable'\n\nexport default {\n   layout: 'edit',\n   middleware: 'auth',\n   computed: {\n    ...mapGetters(['isAuthenticated', 'loggedInfont']),\n  },\n  components: {\n\t  draggable\n  },\n  created() {\n\n  },\n  data() {\n    return {\n\t    url_server:this.$store.state.url_server,\n\t    url_back: '',\n\t    table:'playlist',\n\t    isShowLoading:true,\n\t    isShowNoResult:false,\n\t    id_user: this.$auth.user.id,\n\t\tplaylists : [],\n\t\trecherche : \"\",\n\t\ttriMode: \"ASC\",\n\t\ttriBy: \"titre\",\n\t\turl_add: '/edit/playlists/form?id_playlist=0',\n    }\n  },\n  mounted() {\n\t    this.getPlaylists();\n\t\t\n\t\tlet spans = document.querySelectorAll('button');\n\n\t    spans.forEach(el => {\n\t      el.addEventListener('click', this.deleteCancelFromList);\n\t    })\n  },\t\n  methods: {\n    getPlaylists: function()\n\t {\n       axios.get(this.url_server + \"/getPlaylists?recherche=\" + this.recherche + \"&triBy=\" + this.triBy + \"&triMode=\" + this.triMode)\n       .then(response => {\n\t       this.isShowLoading = false;\n\t       this.playlists = response.data.liste;\n\t       if (this.playlists.length == 0) this.isShowNoResult = true;\n\t   })\n       .catch(error => displayErreur('error loading playlists'))\n    },\n    getPlaylist(id_playlist)\n\t{\n\t\tthis.$router.push(\"/edit/playlists/form?id_playlist=\" + id_playlist); \n\t},\n\tdeleteFromList(e,id_playlist)\n\t{\n\t\tvar el = e.target.closest(\"td\");\n\t\tel.querySelector('.iconDelete').classList.add(\"hidden\")\n\t\tel.querySelector('.deleteFromList').classList.remove(\"hidden\")\n\t},\n\tdeleteCancelFromList(e) {\n\t\tvar el = e.target.closest(\"td\");\n\t\tel.querySelector('.deleteFromList').classList.add(\"hidden\")\n\t\tel.querySelector('.iconDelete').classList.remove(\"hidden\")\n\t}\n\t,\n\tdeleteConfirmFromList(e,id_playlist) {\n\t\tthis.deleteCancelFromList(e);\n\t\t\n\t\taxios.get(this.url_server + \"/delPlaylist?id_playlist=\" + id_playlist)\n       .then(response => {\n\t       this.getPlaylists();\n\t   })\n       .catch(error => displayErreur(\"error deleting playlist\"))\n\t},\n\tonlineFromList(e,id_playlist)\n\t{\n\t\tvar el = e.target.closest(\"td\");\n\t\t\n\t\taxios.get(this.url_server + \"/online?table=playlist&libelle=id_playlist&id=\" + id_playlist)\n       .then(response => {\n\t       if (response.data.status != '') el.innerHTML = response.data.status;\n\t   })\n       .catch(error => displayErreur(\"error changing playlist state\"))\n\t}\n\t,\n\tsearchFromList(e)\n\t{\n\t\tthis.getPlaylists();\n\t}\n\t,\n\tsortFromList(val)\n\t{\n\t\tif (this.triMode == \"ASC\") this.triMode = \"DESC\";\n\t\telse this.triMode = \"ASC\";\n\t\t\n\t\tthis.triBy = val;\n\t\tthis.getPlaylists();\n\t}\n\t,\n\tonEndPosition()\n\t{\n\t\tlet data = {\n\t\t\tlist: this.playlists,\n\t      };\n\t\t axios.post(this.url_server + \"/updatePlaylistPosition\", data)\n\t       .then(response => {\n\t\t       \n\t\t   })\n\t       .catch(error => displayErreur(\"error changing playlist position\"))\n\t}\n\t\n\t\n\t\n  }\n  \n  \n}\n\n\n","import mod from \"-!../../../node_modules/babel-loader/lib/index.js??ref--2-0!../../../node_modules/@nuxt/components/dist/loader.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/babel-loader/lib/index.js??ref--2-0!../../../node_modules/@nuxt/components/dist/loader.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=8130eef0&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  \"28e62d1e\"\n  \n)\n\nexport default component.exports"],"mappings":";;;;;;;;;;;AAAA;AACA;AACA;;;;;;;;;;;;;;;;ACFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAIA;AACA;AACA;AAEA;AACA;AACA;AACA;AAAA;AAGA;AACA;AADA;AACA;AAEA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAXA;AAaA;AACA;AAAA;AACA;AAEA;AAEA;AACA;AACA;AACA;AACA;AAAA;AACA;AAEA;AAEA;AACA;AACA;AACA;AAEA;AACA;AAAA;AAEA;AACA;AACA;AAAA;AAEA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAEA;AACA;AAEA;AACA;AAAA;AAEA;AAEA;AAEA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AAGA;AACA;AACA;AACA;AACA;AAEA;AACA;AADA;AAGA;AAKA;AACA;AAxEA;AApCA;;ACpDA;;;;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;A","sourceRoot":""}