{"version":3,"file":"pages/edit/playlists/form.js","sources":["webpack:///./pages/edit/playlists/form.vue?424a","webpack:///./pages/edit/playlists/form.vue?0710","webpack:///./pages/edit/playlists/form.vue?51b0","webpack:///./pages/edit/playlists/form.vue?6aa6","webpack:///./pages/edit/playlists/form.vue","webpack:///./pages/edit/playlists/form.vue?c630","webpack:///./pages/edit/playlists/form.vue?1c01"],"sourcesContent":["// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/@nuxt/postcss8/node_modules/css-loader/dist/cjs.js??ref--3-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/@nuxt/postcss8/node_modules/postcss-loader/dist/cjs.js??ref--3-oneOf-1-2!../../../node_modules/@nuxt/components/dist/loader.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./form.vue?vue&type=style&index=0&lang=css&\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add CSS to SSR context\nvar add = require(\"!../../../node_modules/vue-style-loader/lib/addStylesServer.js\").default\nmodule.exports.__inject__ = function (context) {\n  add(\"694db731\", content, true, context)\n};","export * from \"-!../../../node_modules/vue-style-loader/index.js??ref--3-oneOf-1-0!../../../node_modules/@nuxt/postcss8/node_modules/css-loader/dist/cjs.js??ref--3-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/@nuxt/postcss8/node_modules/postcss-loader/dist/cjs.js??ref--3-oneOf-1-2!../../../node_modules/@nuxt/components/dist/loader.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./form.vue?vue&type=style&index=0&lang=css&\"","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../node_modules/@nuxt/postcss8/node_modules/css-loader/dist/runtime/api.js\");\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(function(i){return i[1]});\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".color-block{width:100%!important}\", \"\"]);\n// Exports\n___CSS_LOADER_EXPORT___.locals = {};\nmodule.exports = ___CSS_LOADER_EXPORT___;\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"container edit-form-nav\"},[_vm._ssrNode(\"<div\"+(_vm._ssrClass(\"list-container edit-container edit-form\",{'opacity-20': !_vm.isLoadForm}))+\">\",\"</div>\",[_vm._ssrNode(\"<div class=\\\"form-container\\\">\",\"</div>\",[_vm._ssrNode(\"<form method=\\\"post\\\" autocomplete=\\\"off\\\">\",\"</form>\",[_vm._ssrNode(\"<div class=\\\"form-bloc\\\">\",\"</div>\",[_vm._ssrNode(\"<div class=\\\"col w-full\\\">\",\"</div>\",[_vm._ssrNode(\"<div class=\\\"col-content\\\">\",\"</div>\",[_vm._ssrNode(\"<label for=\\\"id_intervenant\\\" id=\\\"Lid_intervenant\\\" class=\\\"help-content\\\">Invit√© <div class=\\\"help-picto\\\"><svg xmlns=\\\"http://www.w3.org/2000/svg\\\" fill=\\\"none\\\" viewBox=\\\"0 0 24 24\\\" stroke=\\\"currentColor\\\"><path stroke-linecap=\\\"round\\\" stroke-linejoin=\\\"round\\\" stroke-width=\\\"2\\\" d=\\\"M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z\\\"></path></svg></div></label> \"),_c('select',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.id_intervenant),expression:\"id_intervenant\"}],attrs:{\"name\":\"id_intervenant\",\"id\":\"id_intervenant\"},on:{\"change\":function($event){var $$selectedVal = Array.prototype.filter.call($event.target.options,function(o){return o.selected}).map(function(o){var val = \"_value\" in o ? o._value : o.value;return val}); _vm.id_intervenant=$event.target.multiple ? $$selectedVal : $$selectedVal[0]}}},[_c('option',{attrs:{\"value\":\"0\"}}),_vm._v(\" \"),_vm._l((_vm.intervenants),function(intervenant,indexIntervenant){return _c('option',{domProps:{\"value\":intervenant.id_intervenant}},[_vm._v(_vm._s(intervenant.prenom)+\" \"+_vm._s(intervenant.nom))])})],2)],2)])]),_vm._ssrNode(\" <div class=\\\"form-bloc\\\"><div class=\\\"col w-full\\\"><div class=\\\"col-content\\\"><label for=\\\"titre\\\" id=\\\"Ltitre\\\">Titre</label> <input type=\\\"text\\\" name=\\\"titre\\\" id=\\\"titre\\\" value class=\\\"required_field\\\"></div></div></div> \"),(_vm.displayComposant)?[_c('editFile',{ref:\"editFileEl\",attrs:{\"file_id_parent\":_vm.id_playlist},on:{\"update:file_id_parent\":function($event){_vm.id_playlist=$event}}})]:_vm._e(),_vm._ssrNode(\" \"),(_vm.displayComposant)?[_c('editSeo',{ref:\"editSeoEl\",attrs:{\"seo_id_parent\":_vm.id_playlist,\"seo_source\":_vm.source},on:{\"onChange\":_vm.confirmSubmit,\"update:seo_id_parent\":function($event){_vm.id_playlist=$event},\"update:seo_source\":function($event){_vm.source=$event}}})]:_vm._e(),_vm._ssrNode(\" <div class=\\\"form-action\\\"><div><button type=\\\"button\\\">Annuler</button></div> <div><button type=\\\"submit\\\">Enregistrer</button></div></div>\")],2)])])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport { mapGetters } from 'vuex';\nimport axios from 'axios';\nimport moment from 'moment';\n\n\nconst cancelTokenSource = axios.CancelToken.source();\n\nexport default {\n  layout: 'edit',\n  middleware: 'auth',\n  computed: {\n    ...mapGetters(['isAuthenticated', 'loggedInUser']),\n  },\n  created() {\n\t this.url_list = '/edit/playlists/';\n\t \n\t if (typeof this.$route.query.id_playlist === 'undefined') {\n\t\t this.id_playlist = 0;\n\t }\n\t else  this.id_playlist = parseInt(this.$route.query.id_playlist);\n\t \t \t \n  }\n  ,\n  mounted() {\n\t  if (this.id_playlist == '0') this.id_playlist = this.getNextId(this.source)\n\t  else {\n\t\t  this.getPlaylist();\n\t  }\n\t  \n\t  this.getIntervenants();\n\n  },\n  data() {\n    return {\n\t  url_server:this.$store.state.url_server,\n\t  id_font_app: this.$auth.user.id,\n\t  user_app: this.$auth.user.username,\n\t  initModeForm:'include',\n\t  source:'playlist',\n\t  isNew:false,\n\t  url_list: '',\n\t  isLoadForm:false,\n\t  id_playlist: 0,\n\t  id_intervenant:0,\n      titre:'',\n\t  playlist:[],\n\t  intervenants:[],\n\t  displayComposant : false,\n\t  displayEditSeo : false,\n    }\n  }\n  ,\n  methods: {\n\tgetPlaylist: function()\n\t {\n       axios.get(this.url_server + \"/getPlaylist?id_playlist=\" + this.id_playlist)\n       .then(response => {\n\t       this.playlist = response.data.liste;\n\t\t   if (typeof this.playlist.titre !== 'undefined') {\n\t\t       this.id_playlist = this.playlist.id_playlist;\n\t\t       this.id_intervenant = this.playlist.id_intervenant;\n\t\t       this.titre = this.playlist.titre;\n\t\t    }\n\t\t    \n\t\t    this.isLoadForm = true;\n\t       this.displayComposant = true;\n\t   })\n       .catch(error => {\n\t       this.id_playlist = 0;\n\t\t   displayErreur(\"'error loading playlist\")\n      })\n    }\n    ,\n     getIntervenants: function()\n\t {\n       axios.get(this.url_server + \"/getIntervenants?recherche=&triBy=nom&triMode=ASC\")\n       .then(response => {\n\t       this.intervenants = response.data.liste;\n\t   })\n\t   .catch(error => {\n\t\t   displayErreur('intervenant loading error')\n      })\n    }\n    ,\n    submit() {\n\t   clearRequired();\n\t   this.hideErreur();\n\n\t   let data = { \n\t\tid_playlist: this.id_playlist,\n\t\ttitre: this.titre,\n\t\tid_intervenant: this.id_intervenant,\n        isNew: this.isNew,\n      };\n\n\t  var isFromSeo = false;\n      var elems = document.querySelectorAll(\".required_field\");\n\t  [].forEach.call(elems, function(el) {\n\t\t    if ((el.value == '')) {\n\t\t\t   if (el.classList.contains(\"fromSeo\")) isFromSeo = true;\n\t\t\t   el.classList.add(\"required\");\n\t\t\t}\n\t\t});\n\t\t\n\t\tif(checkRequired()) {\n\t\t\tif (isFromSeo) this.$refs.editSeoEl.isShowSeo = true;\n\t\t\tdisplayErreur(\"Les champs en rouge sont requis\");\n\t\t}\n\t\telse {\n\t\t\tdisabledActions();\n\t\t\t  axios.post(this.url_server + \"/addPlaylist\", data)\n\t\t\t   .then(response => {\n\t\t\t\t   this.id_playlist = response.data.id_playlist;\n\t\t\t\t   this.$refs.editSeoEl.saveSeo();\n\t\t\t   })\n\t\t\t   .catch(error => {\n\t\t\t\t  enabledActions();\n\t\t\t\t  displayErreur(\"Error adding playlist : \" + error)\n\t\t\t   })\n\t\t\t\n\t\t}\n       \n    },\n    getNextId(table) {\n\t    axios.get(this.url_server + \"/getNextId?table=\" + table)\n\t       .then(response => {\n\t\t       this.id_playlist = response.data.id;\n\t\t       this.isNew = true;\n\t\t       this.getPlaylist();\n\t\t    })\n\t\t   .catch(error => {\n\t\t\t   displayErreur('Error getting nextId')\n\t      })\n    }\n    ,\n    confirmSubmit() {\n\t    this.$router.push('/edit/playlists/');\n\t}\n    ,\n\tupdateSeo(){\n\t  var titre = '';\n\t  if (Array.isArray(this.titre)) titre = this.titre[0];\n\t  else titre = this.titre;\n\n\t  this.$refs.editSeoEl.updateInputSeo(titre);\n\t  \n\t}\n\t,\n    hideErreur: function()\n    {\n\t    hideErreur();\n    }\n    ,\n    cancelForm: function(url)\n    {\n\t    this.$router.push(url);\n    }\n    ,\n    initForm: function(event)\n    {\n\t   if (event.target.classList.contains(\"required\")) event.target.classList.remove(\"required\");\n\t   enabledActions();\n\t   hideErreur();\n    }\n    ,\n    showHelp: function(message)\n    {\n\t    displayErreur(message)\n    }\n    ,\n    hideHelp: function()\n    {\n\t    hideErreur();\n    }\n    \n  }\n}\n","import mod from \"-!../../../node_modules/babel-loader/lib/index.js??ref--2-0!../../../node_modules/@nuxt/components/dist/loader.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./form.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/babel-loader/lib/index.js??ref--2-0!../../../node_modules/@nuxt/components/dist/loader.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./form.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./form.vue?vue&type=template&id=5dda8cbd&\"\nimport script from \"./form.vue?vue&type=script&lang=js&\"\nexport * from \"./form.vue?vue&type=script&lang=js&\"\nfunction injectStyles (context) {\n  \n  var style0 = require(\"./form.vue?vue&type=style&index=0&lang=css&\")\nif (style0.__inject__) style0.__inject__(context)\n\n}\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  injectStyles,\n  null,\n  \"67627975\"\n  \n)\n\nexport default component.exports"],"mappings":";;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;ACXA;AAAA;AAAA;AAAA;;;;;;;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;ACPA;AACA;AACA;;;;;;;;;;;;;;;ACFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AAGA;AAEA;AACA;AACA;AACA;AAAA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAGA;AACA;AACA;AACA;AAEA;AACA;AAEA;AAEA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAfA;AAiBA;AACA;AACA;AACA;AAEA;AAEA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AAEA;AAEA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AAJA;AAOA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AAEA;AAEA;AACA;AAAA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAGA;AAEA;AACA;AACA;AAEA;AACA;AAEA;AAEA;AACA;AAEA;AAEA;AACA;AACA;AACA;AAEA;AAEA;AACA;AAEA;AAEA;AACA;AAzHA;AA7CA;;ACjEA;;;;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;A","sourceRoot":""}