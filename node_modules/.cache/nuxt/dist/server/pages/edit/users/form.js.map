{"version":3,"file":"pages/edit/users/form.js","sources":["webpack:///./pages/edit/users/form.vue?b876","webpack:///./pages/edit/users/form.vue","webpack:///./pages/edit/users/form.vue?03a6","webpack:///./pages/edit/users/form.vue?5493"],"sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"container\"},[_vm._ssrNode(\"<div class=\\\"list-container edit-container edit-form\\\">\",\"</div>\",[_vm._ssrNode(\"<div class=\\\"edit-container-header\\\">\",\"</div>\",[_vm._ssrNode(\"<h1>User</h1>\"),_vm._ssrNode(\"<div class=\\\"add\\\">\",\"</div>\",[_c('NuxtLink',{attrs:{\"to\":\"/edit/users\"}},[_c('svg',{staticClass:\"h-6 w-6\",attrs:{\"xmlns\":\"http://www.w3.org/2000/svg\",\"fill\":\"none\",\"viewBox\":\"0 0 24 24\",\"stroke\":\"currentColor\"}},[_c('path',{attrs:{\"stroke-linecap\":\"round\",\"stroke-linejoin\":\"round\",\"stroke-width\":\"2\",\"d\":\"M4 6h16M4 10h16M4 14h16M4 18h16\"}})])])],1)],2),_vm._ssrNode(\" <div class=\\\"form-container\\\"><form method=\\\"post\\\" autocomplete=\\\"off\\\"><div class=\\\"form-bloc\\\"><div class=\\\"col w-full\\\"><div class=\\\"col-content row items-center\\\"><div class=\\\"relative  inline-block w-9 mr-2 align-middle select-none transition duration-200 ease-in\\\"><input type=\\\"checkbox\\\" name=\\\"id_droit\\\" id=\\\"id_droit\\\" value=\\\"1\\\"\"+(_vm._ssrAttr(\"checked\",Array.isArray(_vm.id_droit)?_vm._i(_vm.id_droit,\"1\")>-1:(_vm.id_droit)))+\" class=\\\"toggle-checkbox\\\"> <label for=\\\"id_droit\\\" class=\\\"toggle-label\\\"></label></div> <label for=\\\"id_droit\\\" id=\\\"Lid_droit\\\">Admin</label></div></div></div> <div class=\\\"form-bloc\\\"\"+(_vm._ssrStyle(null,null, { display: (_vm.id_user != 0) ? '' : 'none' }))+\"><div class=\\\"col w-full\\\"><div class=\\\"col-content row items-top\\\"><div class=\\\"relative  inline-block w-9 mr-2 align-middle select-none transition duration-200 ease-in\\\"><input type=\\\"checkbox\\\" name=\\\"invitation\\\" id=\\\"invitation\\\" value=\\\"1\\\"\"+(_vm._ssrAttr(\"checked\",Array.isArray(_vm.invitation)?_vm._i(_vm.invitation,\"1\")>-1:(_vm.invitation)))+\" class=\\\"toggle-checkbox\\\"> <label for=\\\"invitation\\\" class=\\\"toggle-label\\\"></label></div> <div><label for=\\\"invitation\\\" id=\\\"Linvitation\\\"><span\"+(_vm._ssrStyle(null,null, { display: (!_vm.isSendInvitation) ? '' : 'none' }))+\">Send an invitation</span><span\"+(_vm._ssrStyle(null,null, { display: (_vm.isSendInvitation) ? '' : 'none' }))+\">Sending the invitation in progress...</span></label> <div class=\\\"block\\\">\"+_vm._ssrEscape(\"Invitation sent: \"+_vm._s(_vm.nb_invitation))+\"</div></div></div></div></div> <div class=\\\"form-bloc\\\"><div class=\\\"col w-full\\\"><div class=\\\"col-content\\\"><label for=\\\"nom\\\" id=\\\"Lnom\\\">Last Name</label> <input type=\\\"text\\\" name=\\\"nom\\\" id=\\\"nom\\\" value class=\\\"required_field\\\"></div></div></div> <div class=\\\"form-bloc\\\"><div class=\\\"col w-full\\\"><div class=\\\"col-content\\\"><label for=\\\"prenom\\\" id=\\\"Lprenom\\\">First name</label> <input type=\\\"text\\\" name=\\\"prenom\\\" id=\\\"prenom\\\" value></div></div></div> <div class=\\\"form-bloc\\\"><div class=\\\"col w-full\\\"><div class=\\\"col-content\\\"><label for=\\\"email\\\" id=\\\"Lemail\\\">E-mail</label> <input type=\\\"email\\\" name=\\\"email\\\" id=\\\"email\\\" value class=\\\"required_field\\\"></div></div></div> <div class=\\\"form-action\\\"><div><button type=\\\"button\\\">Cancel</button></div> <div><button type=\\\"submit\\\">Save</button></div></div></form></div>\")],2)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport { mapGetters } from 'vuex';\nimport axios from 'axios';\nimport moment from 'moment';\n\nexport default {\n  layout: 'edit',\n  middleware: 'auth',\n  components: {\n  },\n  created() {\n\t if (typeof this.$route.query.id_user === 'undefined') {\n\t\t this.id_user = 0;\n\t }\n\t else  this.id_user = this.$route.query.id_user;\n  }\n  ,\n   computed: {\n    ...mapGetters(['isAuthenticated', 'loggedInUser']),\n  },\n  mounted() {\n\t\tif (this.id_user > 0) this.getUser();\n\t\t\n\t\t//this.getVille('saints');\n  },\n  data() {\n    return {\n\turl_server:this.$store.state.url_server,\n    attributes: [\n      // This is a single attribute\n      {\n       \n      }\n    ],\n\t  id_user_app: this.$auth.user.id,\n\t  user_app: this.$auth.user.username,\n\t  url_list: '/edit/users',\n\t  id_user: 0,\n      nom: '',\n      prenom:'',\n      email:'',\n      id_droit: 0,\n      invitation:0,\n      nb_invitation:0,\n      isSendInvitation:false,\n\t  user:[],\n    }\n  },\n  methods: {\n\tgetUser: function()\n\t {\n       axios.get(this.url_server + \"/getUser?id_user=\" + this.id_user)\n       .then(response => {\n\t       this.user = response.data.liste;\n\n\t       this.nom = this.user.nom;\n\t       this.prenom = this.user.prenom;\n\t       this.email = this.user.email;\n\t       this.id_droit = this.user.id_droit;\n\t       this.nb_invitation = this.user.invitation;\n\n\n\t   })\n       .catch(error => {\n\t       this.id_user = 0;\n\t\t   displayErreur(\"erreur de chargement de l'utilisateur\")\n      })\n    },\n    submit() {\n\t   clearRequired();\n\t   this.hideErreur();\n\t   var date_depart = moment(this.date_depart).format('YYYY-MM-DD, h:mm:ss');\n\t   var date_retour = moment(this.date_retour).format('YYYY-MM-DD, h:mm:ss');\n\t   \n\t   \n\t   \n\t   let data = {\n\t\tid_user: this.id_user,\n\t\tnom: this.nom,\n        prenom: this.prenom,\n        email: this.email,\n        id_droit: this.id_droit,\n      };\n\n      var elems = document.querySelectorAll(\".required_field\");\n\t  [].forEach.call(elems, function(el) {\n\t\t    if ((el.value == '')) el.classList.add(\"required\");\n\t\t});\n\t\t\n\t\tif(checkRequired()) {\n\t\t\tdisplayErreur(\"The fields indicated are required\");\n\t\t}\n\t\telse {\n\t\t\tdisabledActions();\n\t\t\tconst timeoutObj = setTimeout(() => {\n\t\t\t  axios.post(this.url_server + \"/addUser\", data)\n\t\t\t   .then(response => {\n\t\t\t\t   this.id_user = response.data.id_user;\n\t\t\t\t    this.$router.push('/edit/users');\n\t\t\t   }\n\t\t\t   )\n\t\t\t   .catch(response => {\n\t\t\t\t  enabledActions();\n\t\t\t\t  displayErreur(\"Erreur lors de l'ajout d'un utilisateur\")\n\t\t\t   }\n\t\t\t   )\n\t\t\t}, 1000);\n\t\t\t\n\t\t}\n       \n    }\n    ,\n    sendInvitation: function()\n    {\n\t    if (!this.invitation) {\n\t\t   document.getElementById(\"invitation\").disabled = true;\n\t\t   this.isSendInvitation = true;\n\t\t   \n\t\t   const timeoutObj = setTimeout(() => { \n\t\t\t   axios.get(this.url_server + \"/invitationUser?id_user=\" + this.id_user + \"&name_from=\" + this.user_app)\n\t\t    \n\t\t       .then(response => {\n\t\t\t       document.getElementById(\"invitation\").disabled = false;\n\t\t\t\t   this.invitation = 0;\n\t\t\t\t   this.nb_invitation = response.data.nb_invitation;\n\t\t\t\t   this.isSendInvitation = false;\n\t\t\t\t   displayErreur(\"The invitation has been sent\")\n\t\t\n\t\t\n\t\t\t   })\n\t\t       .catch(error => {\n\t\t\t\t   displayErreur(\"erreur lors de l'envoi de l'invitation\");\n\t\t\t\t    document.getElementById(\"invitation\").disabled = false;\n\t\t\t\t   this.invitation = 0;\n\t\t\t\t   this.isSendInvitation = false;\n\t\t      })\n\t\t\t  \n\t\t   }, 1500); \n\t    }\n    }\n    ,\n    hideErreur: function()\n    {\n\t    hideErreur();\n    }\n    ,\n    cancelForm: function(url)\n    {\n\t    this.$router.push(url);\n    }\n    ,\n    initForm: function(event)\n    {\n\t   if (event.target.classList.contains(\"required\")) event.target.classList.remove(\"required\");\n\t   enabledActions();\n\t   hideErreur();\n    }\n  }\n}\n","import mod from \"-!../../../node_modules/babel-loader/lib/index.js??ref--2-0!../../../node_modules/@nuxt/components/dist/loader.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./form.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/babel-loader/lib/index.js??ref--2-0!../../../node_modules/@nuxt/components/dist/loader.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./form.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./form.vue?vue&type=template&id=fb843108&\"\nimport script from \"./form.vue?vue&type=script&lang=js&\"\nexport * from \"./form.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  \"20f18dae\"\n  \n)\n\nexport default component.exports"],"mappings":";;;;;;;;;;;AAAA;AACA;AACA;;;;;;;;;;;;;;;;ACFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AAAA;AACA;AAEA;AACA;AAGA;AACA;AAAA;AACA;AACA;AACA;AAEA;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAnBA;AAqBA;AACA;AAAA;AACA;AAEA;AAEA;AAEA;AACA;AACA;AACA;AACA;AAGA;AAEA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AAIA;AACA;AACA;AACA;AACA;AACA;AALA;AAQA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AAGA;AACA;AACA;AAEA;AAEA;AAEA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AAGA;AACA;AACA;AACA;AACA;AAGA;AAEA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AAEA;AAEA;AACA;AAEA;AAEA;AACA;AAEA;AAEA;AACA;AACA;AACA;AA5GA;AA3CA;;AC7EA;;;;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;A","sourceRoot":""}