exports.ids = [24];
exports.modules = {

/***/ 64:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__);

// CONCATENATED MODULE: ./node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/@nuxt/components/dist/loader.js??ref--0-0!./node_modules/vue-loader/lib??vue-loader-options!./pages/edit/users/index.vue?vue&type=template&id=6623f69a&
var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:"container no-scrollbar"},[_vm._ssrNode("<div class=\"list-container edit-container\">","</div>",[_vm._ssrNode("<div class=\"edit-container-header\">","</div>",[_vm._ssrNode("<h1>Users</h1>"),_vm._ssrNode("<div class=\"add highlight\">","</div>",[_c('NuxtLink',{attrs:{"to":"/edit/users/form?id_user=0"}},[_c('svg',{staticClass:"big",attrs:{"xmlns":"http://www.w3.org/2000/svg","fill":"none","viewBox":"0 0 24 24","stroke":"currentColor"}},[_c('path',{attrs:{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2","d":"M12 4v16m8-8H4"}})])])],1)],2),_vm._ssrNode(" <div class=\"tools\"><div><input placeholder=\"rechercher\" type=\"text\" name=\"recherche\" id=\"recherche\" value></div> <div>"+_vm._ssrEscape(_vm._s(_vm.users.length)+" résultat")+((_vm.users.length > 1)?("<span>s</span>"):"<!---->")+"</div></div> "),_vm._ssrNode("<table class=\"w-full\">","</table>",[_vm._ssrNode("<thead><tr class=\"hide\"><th class=\"text-left cursor-pointer isLink\">Last name</th> <th class=\"text-left cursor-pointer isLink\">First name</th> <th class=\"text-left cursor-pointer   isLink\">E-mail</th> <th class=\"w-6 text-left  isLink\"> </th> <th class=\"w-6 text-left\"> </th></tr></thead> "),_vm._ssrNode("<tbody>","</tbody>",[(!_vm.users.length)?_vm._ssrNode("<tr>","</tr>",[_vm._ssrNode("<td class=\"flex\">","</td>",[_vm._ssrNode("<div"+(_vm._ssrStyle(null,null, { display: (_vm.isShowLoading) ? '' : 'none' }))+">Loading users...</div>"),_vm._ssrNode("<div class=\"flex\""+(_vm._ssrStyle(null,null, { display: (_vm.isShowNoResult) ? '' : 'none' }))+">","</div>",[_vm._ssrNode("<div class=\"pr-1\">","</div>",[_c('NuxtLink',{attrs:{"to":"/edit/users/form"}},[_vm._v("... ")])],1),_vm._ssrNode(" "),_vm._ssrNode("<div class=\"add highlight\">","</div>",[_c('NuxtLink',{attrs:{"to":"/edit/users/form"}},[_c('svg',{staticClass:"big",attrs:{"xmlns":"http://www.w3.org/2000/svg","fill":"none","viewBox":"0 0 24 24","stroke":"currentColor"}},[_c('path',{attrs:{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2","d":"M12 4v16m8-8H4"}})])])],1)],2)],2)]):_vm._e(),_vm._ssrNode(" "+(_vm._ssrList((_vm.users),function(user,indexUser){return ("<tr"+(_vm._ssrClass("border-b border-mainColor isLink",user.id_droit == 1 ? 'text-headerColor' : ''))+"><td>"+_vm._ssrEscape(_vm._s(user.nom))+"</td> <td>"+_vm._ssrEscape(_vm._s(user.prenom))+"</td> <td>"+_vm._ssrEscape(_vm._s(user.email))+"</td> <td class=\"actionList\">"+((user.online==1)?("<span>online</span>"):("<span>draft</span>"))+"</td> <td class=\"actionList\"><div class=\"iconDelete\"><svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\"><path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16\"></path></svg></div> <div class=\"deleteFromList hidden l flex justify-end  items-center\"><div class=\"mr-1\"><button type=\"button\" class=\"half\">Annuler</button></div><div><button type=\"button\" class=\"half\">Confirmer</button></div></div></td></tr>")})))],2)],2)],2)])}
var staticRenderFns = []


// CONCATENATED MODULE: ./pages/edit/users/index.vue?vue&type=template&id=6623f69a&

// EXTERNAL MODULE: external "vuex"
var external_vuex_ = __webpack_require__(3);

// EXTERNAL MODULE: external "axios"
var external_axios_ = __webpack_require__(6);
var external_axios_default = /*#__PURE__*/__webpack_require__.n(external_axios_);

// CONCATENATED MODULE: ./node_modules/babel-loader/lib??ref--2-0!./node_modules/@nuxt/components/dist/loader.js??ref--0-0!./node_modules/vue-loader/lib??vue-loader-options!./pages/edit/users/index.vue?vue&type=script&lang=js&
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//


/* harmony default export */ var usersvue_type_script_lang_js_ = ({
  layout: 'edit',
  middleware: 'auth',
  computed: { ...Object(external_vuex_["mapGetters"])(['isAuthenticated', 'loggedInUser'])
  },

  data() {
    return {
      url_server: this.$store.state.url_server,
      table: 'user',
      isShowLoading: true,
      isShowNoResult: false,
      id_user: this.$auth.user.id,
      users: "",
      recherche: "",
      triMode: "ASC",
      triBy: "nom"
    };
  },

  mounted() {
    //displayErreur("loading...");
    this.getUsers();
    let spans = document.querySelectorAll('button');
    spans.forEach(el => {
      el.addEventListener('click', this.deleteCancelFromList);
    });
  },

  methods: {
    getUsers: function () {
      external_axios_default.a.get(this.url_server + "/getUsers?recherche=" + this.recherche + "&triBy=" + this.triBy + "&triMode=" + this.triMode).then(response => {
        this.isShowLoading = false;
        this.users = response.data.liste;
        if (this.users.length == 0) this.isShowNoResult = true;
      }).catch(error => displayErreur('erreur de chargement des utilisateurs'));
    },

    getUser(id_user) {
      this.$router.push("/edit/users/form?id_user=" + id_user);
    },

    deleteFromList(e, id_user) {
      var el = e.target.closest("td");
      el.querySelector('.iconDelete').classList.add("hidden");
      el.querySelector('.deleteFromList').classList.remove("hidden");
    },

    deleteCancelFromList(e) {
      var el = e.target.closest("td");
      el.querySelector('.deleteFromList').classList.add("hidden");
      el.querySelector('.iconDelete').classList.remove("hidden");
    },

    deleteConfirmFromList(e, id_user) {
      this.deleteCancelFromList(e);
      external_axios_default.a.get(this.url_server + "/delUser?id_user=" + id_user).then(response => {
        this.getUsers();
      }).catch(error => displayErreur("erreur lors de la suppression de l'utilisateur"));
    },

    onlineFromList(e, id_user) {
      var el = e.target.closest("td");
      external_axios_default.a.get(this.url_server + "/online?table=user&libelle=id_user&id=" + id_user).then(response => {
        if (response.data.status != '') el.innerHTML = response.data.status;
      }).catch(error => displayErreur("erreur lors du changement d'état de l'utilisateur"));
    },

    searchFromList(e) {
      this.getUsers();
    },

    sortFromList(val) {
      if (this.triMode == "ASC") this.triMode = "DESC";else this.triMode = "ASC";
      this.triBy = val;
      this.getUsers();
    }

  }
});
// CONCATENATED MODULE: ./pages/edit/users/index.vue?vue&type=script&lang=js&
 /* harmony default export */ var edit_usersvue_type_script_lang_js_ = (usersvue_type_script_lang_js_); 
// EXTERNAL MODULE: ./node_modules/vue-loader/lib/runtime/componentNormalizer.js
var componentNormalizer = __webpack_require__(2);

// CONCATENATED MODULE: ./pages/edit/users/index.vue





/* normalize component */

var component = Object(componentNormalizer["a" /* default */])(
  edit_usersvue_type_script_lang_js_,
  render,
  staticRenderFns,
  false,
  null,
  null,
  "63e05c58"
  
)

/* harmony default export */ var users = __webpack_exports__["default"] = (component.exports);

/***/ })

};;
//# sourceMappingURL=index.js.map